# MediaNest Production Environment Configuration Template
# Copy this file to .env.production and update with actual values
# NEVER commit sensitive values to version control

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================
NODE_ENV=production
DOMAIN=medianest.yourdomain.com
API_DOMAIN=api.medianest.yourdomain.com
CONTAINER_REGISTRY=docker.io
CONTAINER_TAG=latest

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DB_HOST=postgres-service
DB_PORT=5432
DB_NAME=medianest
DB_USER=medianest_user
DB_PASSWORD=REPLACE_WITH_STRONG_DATABASE_PASSWORD
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}?schema=public

# Database Pool Configuration
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=60000

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_HOST=redis-service
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=REPLACE_WITH_STRONG_REDIS_PASSWORD
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Redis Connection Settings
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY_ON_FAILURE=100
REDIS_COMMAND_TIMEOUT=5000

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# JWT Configuration
JWT_SECRET=REPLACE_WITH_64_CHAR_JWT_SECRET
JWT_EXPIRES_IN=24h
REFRESH_TOKEN_EXPIRES_IN=7d

# Encryption
ENCRYPTION_KEY=REPLACE_WITH_32_CHAR_ENCRYPTION_KEY
ENCRYPTION_ALGORITHM=aes-256-gcm

# Session Configuration
SESSION_SECRET=REPLACE_WITH_SESSION_SECRET
SESSION_TIMEOUT=3600000
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# CORS Configuration
CORS_ORIGIN=https://${DOMAIN}
CORS_CREDENTIALS=true

# ============================================================================
# NEXTAUTH CONFIGURATION (Frontend)
# ============================================================================
NEXTAUTH_URL=https://${DOMAIN}
NEXTAUTH_SECRET=REPLACE_WITH_32_CHAR_NEXTAUTH_SECRET
NEXTAUTH_URL_INTERNAL=http://medianest-frontend-service:3000

# ============================================================================
# PLEX INTEGRATION
# ============================================================================
PLEX_CLIENT_ID=REPLACE_WITH_PLEX_CLIENT_ID
PLEX_CLIENT_SECRET=REPLACE_WITH_PLEX_CLIENT_SECRET
PLEX_BASE_URL=https://plex.tv
PLEX_CALLBACK_URL=https://${API_DOMAIN}/api/auth/plex/callback

# ============================================================================
# EXTERNAL API CONFIGURATION
# ============================================================================
# The Movie Database (TMDB)
TMDB_API_KEY=REPLACE_WITH_TMDB_API_KEY
TMDB_BASE_URL=https://api.themoviedb.org/3
TMDB_IMAGE_BASE_URL=https://image.tmdb.org/t/p

# ============================================================================
# EMAIL/SMTP CONFIGURATION
# ============================================================================
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=REPLACE_WITH_SMTP_PASSWORD
SMTP_FROM=MediaNest <noreply@yourdomain.com>

# ============================================================================
# FILE STORAGE CONFIGURATION
# ============================================================================
UPLOAD_MAX_SIZE=52428800
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm
UPLOAD_PATH=/app/uploads
TMP_PATH=/tmp

# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================
API_RATE_LIMIT=1000
API_RATE_WINDOW=900000
LOGIN_RATE_LIMIT=5
LOGIN_RATE_WINDOW=900000

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
LOG_LEVEL=info
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/app/logs
LOG_FILE_MAX_SIZE=100m
LOG_FILE_MAX_FILES=10
LOG_FILE_DATE_PATTERN=YYYY-MM-DD

# ============================================================================
# MONITORING CONFIGURATION
# ============================================================================
METRICS_ENABLED=true
METRICS_PORT=4000
METRICS_PATH=/metrics
HEALTH_CHECK_PORT=4000
HEALTH_CHECK_PATH=/api/health

# ============================================================================
# PERFORMANCE CONFIGURATION
# ============================================================================
# API Timeouts
API_TIMEOUT=30000
DB_QUERY_TIMEOUT=30000
REQUEST_TIMEOUT=60000

# Caching
CACHE_TTL=3600
CACHE_PREFIX=medianest:
CACHE_ENABLED=true

# ============================================================================
# FEATURE FLAGS
# ============================================================================
ENABLE_ANALYTICS=true
ENABLE_PWA=true
ENABLE_DARK_MODE=true
ENABLE_NOTIFICATIONS=true
ENABLE_AUTO_BACKUP=true

# ============================================================================
# NOTIFICATION CONFIGURATION
# ============================================================================
# Slack Integration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#medianest-alerts

# Discord Integration
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=medianest-backups
BACKUP_S3_REGION=us-west-2

# ============================================================================
# AWS CONFIGURATION (if using AWS services)
# ============================================================================
AWS_REGION=us-west-2
AWS_ACCESS_KEY_ID=REPLACE_WITH_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=REPLACE_WITH_AWS_SECRET_KEY

# ============================================================================
# KUBERNETES CONFIGURATION
# ============================================================================
KUBE_NAMESPACE=medianest-prod
KUBE_CLUSTER_NAME=production-cluster
KUBE_CONTEXT=production

# ============================================================================
# SECURITY HEADERS CONFIGURATION
# ============================================================================
CSP_DEFAULT_SRC="'self'"
CSP_SCRIPT_SRC="'self' 'unsafe-inline' 'unsafe-eval'"
CSP_STYLE_SRC="'self' 'unsafe-inline'"
CSP_IMG_SRC="'self' data: https:"
CSP_FONT_SRC="'self' data:"
CSP_CONNECT_SRC="'self' wss:"
CSP_FRAME_SRC="'self'"

# ============================================================================
# DEVELOPMENT/DEBUG CONFIGURATION (Production: false/disabled)
# ============================================================================
DEBUG=false
NEXT_TELEMETRY_DISABLED=1
VERBOSE_LOGGING=false
ENABLE_CORS_DEBUG=false

# ============================================================================
# GENERATED SECRETS PLACEHOLDERS
# Run: ./deployment/scripts/generate-secrets.sh to generate these
# ============================================================================
# Generated JWT Secret (64 characters)
# Generated Encryption Key (32 characters)  
# Generated NextAuth Secret (32 characters)
# Generated Database Password (25 characters)
# Generated Redis Password (25 characters)
# Generated Session Secret (32 characters)