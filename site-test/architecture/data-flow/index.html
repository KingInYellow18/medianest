<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Complete documentation for MediaNest - Advanced Media Management Platform with Plex Integration, API, and Developer Resources"><meta name="author" content="MediaNest Development Team"><link rel="canonical" href="https://kinginyellow.github.io/medianest/architecture/data-flow/"><link rel="prev" href="../component-architecture/"><link rel="next" href="../system-overview/"><link rel="icon" href="../../assets/images/favicon.ico"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19"><title>Data Flow - MediaNest Documentation</title><link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css"><link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel="stylesheet" href="../../css/timeago.css"><link rel="stylesheet" href="../../stylesheets/extra.css"><link rel="stylesheet" href="../../stylesheets/medianest-theme.css"><link rel="stylesheet" href="../../stylesheets/material-enhancements.css"><link rel="stylesheet" href="../../stylesheets/animations.css"><link rel="stylesheet" href="../../stylesheets/responsive.css"><link rel="stylesheet" href="../../stylesheets/diagram-styles.css"><link rel="stylesheet" href="../../stylesheets/api-docs.css"><link rel="stylesheet" href="../../stylesheets/code-highlights.css"><link rel="stylesheet" href="../../stylesheets/mermaid-custom.css"><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-XXXXXXXXXX"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-XXXXXXXXXX",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script></head><body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple"><input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"><input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"><label class="md-overlay" for="__drawer"></label><div data-md-component="skip"><a href="#medianest-data-flow-architecture" class="md-skip"> Skip to content </a></div><div data-md-component="announce"></div><div data-md-color-scheme="default" data-md-component="outdated" hidden></div><header class="md-header md-header--shadow md-header--lifted" data-md-component="header"><nav class="md-header__inner md-grid" aria-label="Header"><a href="https://kinginyellow.github.io/medianest/" title="MediaNest Documentation" class="md-header__button md-logo" aria-label="MediaNest Documentation" data-md-component="logo"><img src="../../assets/images/logo.svg" alt="logo"></a><label class="md-header__button md-icon" for="__drawer"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class="md-header__title" data-md-component="header-title"><div class="md-header__ellipsis"><div class="md-header__topic"><span class="md-ellipsis"> MediaNest Documentation </span></div><div class="md-header__topic" data-md-component="header-topic"><span class="md-ellipsis"> Data Flow </span></div></div></div><form class="md-header__option" data-md-component="palette"><input class="md-option" data-md-color-media data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_0"><label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label><input class="md-option" data-md-color-media data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="purple" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_1"><label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label></form><script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><label class="md-header__button md-icon" for="__search"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required><label class="md-search__icon md-icon" for="__search"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav class="md-search__options" aria-label="Search"><a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text data-md-component="search-share" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg></a><button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class="md-search__suggest" data-md-component="search-suggest"></div></form><div class="md-search__output"><div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix><div class="md-search-result" data-md-component="search-result"><div class="md-search-result__meta"> Initializing search </div><ol class="md-search-result__list" role="presentation"></ol></div></div></div></div></div><div class="md-header__source"><a href="https://github.com/kinginyellow/medianest" title="Go to repository" class="md-source" data-md-component="source"><div class="md-source__icon md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg></div><div class="md-source__repository"> kinginyellow/medianest </div></a></div></nav><nav class="md-tabs" aria-label="Tabs" data-md-component="tabs"><div class="md-grid"><ul class="md-tabs__list"><li class="md-tabs__item"><a href="../.." class="md-tabs__link"> Home </a></li><li class="md-tabs__item"><a href="../../getting-started/" class="md-tabs__link"> Getting Started </a></li><li class="md-tabs__item md-tabs__item--active"><a href="../component-architecture/" class="md-tabs__link"> Architecture </a></li><li class="md-tabs__item"><a href="../../api/overview/" class="md-tabs__link"> API Reference </a></li><li class="md-tabs__item"><a href="../../operations/monitoring-stack/" class="md-tabs__link"> Operations </a></li><li class="md-tabs__item"><a href="../../deployment/ci-cd/" class="md-tabs__link"> Deployment </a></li><li class="md-tabs__item"><a href="../../developers/contributing/" class="md-tabs__link"> Developers </a></li><li class="md-tabs__item"><a href="../../visuals/database-schema/" class="md-tabs__link"> Visuals </a></li><li class="md-tabs__item"><a href="../../standards/documentation-checklist/" class="md-tabs__link"> Standards </a></li></ul></div></nav></header><div class="md-container" data-md-component="container"><main class="md-main" data-md-component="main"><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0"><label class="md-nav__title" for="__drawer"><a href="https://kinginyellow.github.io/medianest/" title="MediaNest Documentation" class="md-nav__button md-logo" aria-label="MediaNest Documentation" data-md-component="logo"><img src="../../assets/images/logo.svg" alt="logo"></a> MediaNest Documentation </label><div class="md-nav__source"><a href="https://github.com/kinginyellow/medianest" title="Go to repository" class="md-source" data-md-component="source"><div class="md-source__icon md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg></div><div class="md-source__repository"> kinginyellow/medianest </div></a></div><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../.." class="md-nav__link"><span class="md-ellipsis"> Home </span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../getting-started/" class="md-nav__link"><span class="md-ellipsis"> Getting Started </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked><label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex><span class="md-ellipsis"> Architecture </span><span class="md-nav__icon md-icon"></span></label><nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true"><label class="md-nav__title" for="__nav_3"><span class="md-nav__icon md-icon"></span> Architecture </label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../component-architecture/" class="md-nav__link"><span class="md-ellipsis"> Component Architecture </span></a></li><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"><label class="md-nav__link md-nav__link--active" for="__toc"><span class="md-ellipsis"> Data Flow </span><span class="md-nav__icon md-icon"></span></label><a href="./" class="md-nav__link md-nav__link--active"><span class="md-ellipsis"> Data Flow </span></a><nav class="md-nav md-nav--secondary" aria-label="On this page"><label class="md-nav__title" for="__toc"><span class="md-nav__icon md-icon"></span> On this page </label><ul class="md-nav__list" data-md-component="toc" data-md-scrollfix><li class="md-nav__item"><a href="#overview" class="md-nav__link"><span class="md-ellipsis"> Overview </span></a></li><li class="md-nav__item"><a href="#core-data-flow-patterns" class="md-nav__link"><span class="md-ellipsis"> Core Data Flow Patterns </span></a><nav class="md-nav" aria-label="Core Data Flow Patterns"><ul class="md-nav__list"><li class="md-nav__item"><a href="#1-enhanced-request-processing-pipeline" class="md-nav__link"><span class="md-ellipsis"> 1. Enhanced Request Processing Pipeline </span></a></li><li class="md-nav__item"><a href="#2-authentication-data-flow" class="md-nav__link"><span class="md-ellipsis"> 2. Authentication Data Flow </span></a></li><li class="md-nav__item"><a href="#3-media-request-data-flow" class="md-nav__link"><span class="md-ellipsis"> 3. Media Request Data Flow </span></a></li><li class="md-nav__item"><a href="#4-real-time-notification-data-flow" class="md-nav__link"><span class="md-ellipsis"> 4. Real-time Notification Data Flow </span></a></li><li class="md-nav__item"><a href="#5-enhanced-youtube-download-workflow" class="md-nav__link"><span class="md-ellipsis"> 5. Enhanced YouTube Download Workflow </span></a></li></ul></nav></li><li class="md-nav__item"><a href="#database-transaction-patterns" class="md-nav__link"><span class="md-ellipsis"> Database Transaction Patterns </span></a><nav class="md-nav" aria-label="Database Transaction Patterns"><ul class="md-nav__list"><li class="md-nav__item"><a href="#1-user-authentication-transactions" class="md-nav__link"><span class="md-ellipsis"> 1. User Authentication Transactions </span></a></li><li class="md-nav__item"><a href="#2-media-request-transactions" class="md-nav__link"><span class="md-ellipsis"> 2. Media Request Transactions </span></a></li></ul></nav></li><li class="md-nav__item"><a href="#advanced-caching-strategy" class="md-nav__link"><span class="md-ellipsis"> Advanced Caching Strategy </span></a><nav class="md-nav" aria-label="Advanced Caching Strategy"><ul class="md-nav__list"><li class="md-nav__item"><a href="#1-multi-tier-caching-architecture" class="md-nav__link"><span class="md-ellipsis"> 1. Multi-Tier Caching Architecture </span></a></li><li class="md-nav__item"><a href="#2-intelligent-cache-invalidation-system" class="md-nav__link"><span class="md-ellipsis"> 2. Intelligent Cache Invalidation System </span></a></li></ul></nav></li><li class="md-nav__item"><a href="#error-handling-data-flow" class="md-nav__link"><span class="md-ellipsis"> Error Handling Data Flow </span></a><nav class="md-nav" aria-label="Error Handling Data Flow"><ul class="md-nav__list"><li class="md-nav__item"><a href="#1-error-propagation" class="md-nav__link"><span class="md-ellipsis"> 1. Error Propagation </span></a></li><li class="md-nav__item"><a href="#2-circuit-breaker-pattern" class="md-nav__link"><span class="md-ellipsis"> 2. Circuit Breaker Pattern </span></a></li></ul></nav></li><li class="md-nav__item"><a href="#performance-monitoring-data-flow" class="md-nav__link"><span class="md-ellipsis"> Performance Monitoring Data Flow </span></a><nav class="md-nav" aria-label="Performance Monitoring Data Flow"><ul class="md-nav__list"><li class="md-nav__item"><a href="#1-metrics-collection" class="md-nav__link"><span class="md-ellipsis"> 1. Metrics Collection </span></a></li></ul></nav></li><li class="md-nav__item"><a href="#advanced-data-flow-patterns" class="md-nav__link"><span class="md-ellipsis"> Advanced Data Flow Patterns </span></a><nav class="md-nav" aria-label="Advanced Data Flow Patterns"><ul class="md-nav__list"><li class="md-nav__item"><a href="#1-event-driven-architecture-pattern" class="md-nav__link"><span class="md-ellipsis"> 1. Event-Driven Architecture Pattern </span></a></li><li class="md-nav__item"><a href="#2-cqrs-command-query-responsibility-segregation-pattern" class="md-nav__link"><span class="md-ellipsis"> 2. CQRS (Command Query Responsibility Segregation) Pattern </span></a></li></ul></nav></li><li class="md-nav__item"><a href="#data-consistency-patterns" class="md-nav__link"><span class="md-ellipsis"> Data Consistency Patterns </span></a><nav class="md-nav" aria-label="Data Consistency Patterns"><ul class="md-nav__list"><li class="md-nav__item"><a href="#1-eventual-consistency-for-external-apis" class="md-nav__link"><span class="md-ellipsis"> 1. Eventual Consistency for External APIs </span></a></li><li class="md-nav__item"><a href="#2-strong-consistency-for-critical-operations" class="md-nav__link"><span class="md-ellipsis"> 2. Strong Consistency for Critical Operations </span></a></li></ul></nav></li></ul></nav></li><li class="md-nav__item"><a href="../system-overview/" class="md-nav__link"><span class="md-ellipsis"> System Overview </span></a></li><li class="md-nav__item md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4"><label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex><span class="md-ellipsis"> Architecture Decisions </span><span class="md-nav__icon md-icon"></span></label><nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false"><label class="md-nav__title" for="__nav_3_4"><span class="md-nav__icon md-icon"></span> Architecture Decisions </label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../decisions/adr-001-architecture/" class="md-nav__link"><span class="md-ellipsis"> ADR-001 Architecture </span></a></li></ul></nav></li></ul></nav></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../api/overview/" class="md-nav__link"><span class="md-ellipsis"> API Reference </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../operations/monitoring-stack/" class="md-nav__link"><span class="md-ellipsis"> Operations </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../deployment/ci-cd/" class="md-nav__link"><span class="md-ellipsis"> Deployment </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../developers/contributing/" class="md-nav__link"><span class="md-ellipsis"> Developers </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../visuals/database-schema/" class="md-nav__link"><span class="md-ellipsis"> Visuals </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../standards/documentation-checklist/" class="md-nav__link"><span class="md-ellipsis"> Standards </span><span class="md-nav__icon md-icon"></span></a></li></ul></nav></div></div></div><div class="md-content" data-md-component="content"><article class="md-content__inner md-typeset"><a href="https://github.com/kinginyellow/medianest/edit/develop/docs/architecture/data-flow.md" title="Edit this page" class="md-content__button md-icon" rel="edit"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg></a><a href="https://github.com/kinginyellow/medianest/raw/develop/docs/architecture/data-flow.md" title="View source of this page" class="md-content__button md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg></a><h1 id="medianest-data-flow-architecture">MediaNest Data Flow Architecture<a class="headerlink" href="#medianest-data-flow-architecture" title="Permanent link">&para;</a></h1><h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2><p>This document details the data flow patterns within MediaNest, showing how information moves through the system layers, from client requests to database operations and real-time notifications.</p><h2 id="core-data-flow-patterns">Core Data Flow Patterns<a class="headerlink" href="#core-data-flow-patterns" title="Permanent link">&para;</a></h2><h3 id="1-enhanced-request-processing-pipeline">1. Enhanced Request Processing Pipeline<a class="headerlink" href="#1-enhanced-request-processing-pipeline" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>flowchart TD
    subgraph "Client Tier"
        WEB[Web Browser]
        MOBILE[Mobile App]
        API_CLIENT[API Client]
        WEBSOCKET[WebSocket Connection]
    end

    subgraph "Edge &amp; Load Balancing"
        CDN[Content Delivery Network]
        LB[Load Balancer]
        SSL[SSL Termination]
        WAF[Web Application Firewall]
    end

    subgraph "Reverse Proxy Layer"
        NGINX[Nginx Reverse Proxy]
        COMPRESSION[Gzip Compression]
        STATIC[Static File Serving]
    end

    subgraph "Application Security Gateway"
        CORS[CORS Validation]
        SECURITY[Security Headers]
        RATE_LIMIT[Rate Limiting Engine]
        DDoS[DDoS Protection]
    end

    subgraph "Authentication &amp; Authorization"
        AUTH_MW[Authentication Middleware]
        JWT_VALIDATOR[JWT Token Validator]
        OAUTH_HANDLER[OAuth Handler]
        PERM_CHECK[Permission Checker]
    end

    subgraph "Request Processing"
        REQ_VALIDATOR[Request Validator]
        SCHEMA_VALIDATION[Schema Validation]
        CORRELATION[Correlation ID Generator]
        PERF_MONITOR[Performance Monitor]
    end

    subgraph "Application Router"
        API_ROUTER[API Router]
        VERSION_HANDLER[Version Handler]
        ROUTE_MATCHER[Route Matcher]
    end

    subgraph "Controller Layer"
        AUTH_CTRL[Auth Controller]
        MEDIA_CTRL[Media Controller]
        PLEX_CTRL[Plex Controller]
        DASHBOARD_CTRL[Dashboard Controller]
        ADMIN_CTRL[Admin Controller]
        YOUTUBE_CTRL[YouTube Controller]
    end

    subgraph "Business Logic Services"
        AUTH_SVC[Authentication Service]
        MEDIA_SVC[Media Service]
        PLEX_SVC[Plex Service]
        CACHE_SVC[Cache Service]
        NOTIF_SVC[Notification Service]
        HEALTH_SVC[Health Service]
        YOUTUBE_SVC[YouTube Service]
    end

    subgraph "External Integration Layer"
        PLEX_API[Plex API Client]
        OVERSEERR_API[Overseerr API Client]
        TMDB_API[TMDB API Client]
        YOUTUBE_API[YouTube API Client]
        WEBHOOK_HANDLER[Webhook Handler]
    end

    subgraph "Data Access Layer"
        USER_REPO[User Repository]
        MEDIA_REPO[Media Repository]
        YOUTUBE_REPO[YouTube Repository]
        SERVICE_REPO[Service Repository]
        ERROR_REPO[Error Repository]
    end

    subgraph "Data Storage"
        POSTGRES[(PostgreSQL Primary)]
        REDIS[(Redis Cache)]
        FILES[(File Storage)]
    end

    subgraph "Real-time Communication"
        SOCKET_SERVER[Socket.IO Server]
        NOTIFICATION_QUEUE[Notification Queue]
        BG_JOBS[Background Jobs]
    end

    subgraph "Monitoring &amp; Observability"
        METRICS[Metrics Collector]
        LOGS[Log Aggregator]
        TRACING[Distributed Tracing]
        ALERTS[Alert Manager]
    end

    %% Client to Edge
    WEB --&gt; CDN
    MOBILE --&gt; CDN
    API_CLIENT --&gt; CDN
    WEBSOCKET --&gt; SOCKET_SERVER

    %% Edge Processing
    CDN --&gt; LB
    LB --&gt; SSL
    SSL --&gt; WAF
    WAF --&gt; NGINX

    %% Proxy Layer
    NGINX --&gt; COMPRESSION
    COMPRESSION --&gt; STATIC
    STATIC --&gt; CORS

    %% Security Gateway
    CORS --&gt; SECURITY
    SECURITY --&gt; RATE_LIMIT
    RATE_LIMIT --&gt; DDoS
    DDoS --&gt; AUTH_MW

    %% Authentication
    AUTH_MW --&gt; JWT_VALIDATOR
    JWT_VALIDATOR --&gt; OAUTH_HANDLER
    OAUTH_HANDLER --&gt; PERM_CHECK
    PERM_CHECK --&gt; REQ_VALIDATOR

    %% Request Processing
    REQ_VALIDATOR --&gt; SCHEMA_VALIDATION
    SCHEMA_VALIDATION --&gt; CORRELATION
    CORRELATION --&gt; PERF_MONITOR
    PERF_MONITOR --&gt; API_ROUTER

    %% Routing
    API_ROUTER --&gt; VERSION_HANDLER
    VERSION_HANDLER --&gt; ROUTE_MATCHER
    ROUTE_MATCHER --&gt; AUTH_CTRL
    ROUTE_MATCHER --&gt; MEDIA_CTRL
    ROUTE_MATCHER --&gt; PLEX_CTRL
    ROUTE_MATCHER --&gt; DASHBOARD_CTRL
    ROUTE_MATCHER --&gt; ADMIN_CTRL
    ROUTE_MATCHER --&gt; YOUTUBE_CTRL

    %% Controller to Service
    AUTH_CTRL --&gt; AUTH_SVC
    MEDIA_CTRL --&gt; MEDIA_SVC
    PLEX_CTRL --&gt; PLEX_SVC
    DASHBOARD_CTRL --&gt; CACHE_SVC
    ADMIN_CTRL --&gt; HEALTH_SVC
    YOUTUBE_CTRL --&gt; YOUTUBE_SVC

    %% Service to External APIs
    PLEX_SVC --&gt; PLEX_API
    MEDIA_SVC --&gt; OVERSEERR_API
    MEDIA_SVC --&gt; TMDB_API
    YOUTUBE_SVC --&gt; YOUTUBE_API
    HEALTH_SVC --&gt; WEBHOOK_HANDLER

    %% Service to Data Layer
    AUTH_SVC --&gt; USER_REPO
    MEDIA_SVC --&gt; MEDIA_REPO
    YOUTUBE_SVC --&gt; YOUTUBE_REPO
    HEALTH_SVC --&gt; SERVICE_REPO
    NOTIF_SVC --&gt; ERROR_REPO

    %% Repository to Storage
    USER_REPO --&gt; POSTGRES
    MEDIA_REPO --&gt; POSTGRES
    YOUTUBE_REPO --&gt; POSTGRES
    SERVICE_REPO --&gt; POSTGRES
    ERROR_REPO --&gt; POSTGRES

    CACHE_SVC --&gt; REDIS
    AUTH_SVC --&gt; REDIS
    RATE_LIMIT --&gt; REDIS

    YOUTUBE_SVC --&gt; FILES

    %% Real-time Communication
    NOTIF_SVC --&gt; NOTIFICATION_QUEUE
    NOTIFICATION_QUEUE --&gt; SOCKET_SERVER
    SOCKET_SERVER --&gt; WEB

    BG_JOBS --&gt; YOUTUBE_SVC
    BG_JOBS --&gt; MEDIA_SVC

    %% Monitoring
    PERF_MONITOR --&gt; METRICS
    CORRELATION --&gt; LOGS
    API_ROUTER --&gt; TRACING
    HEALTH_SVC --&gt; ALERTS

    classDef clientTier fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef edgeTier fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef securityTier fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef appTier fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef dataTier fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef monitoringTier fill:#fce4ec,stroke:#c2185b,stroke-width:2px

    class WEB,MOBILE,API_CLIENT,WEBSOCKET clientTier
    class CDN,LB,SSL,WAF,NGINX,COMPRESSION,STATIC edgeTier
    class CORS,SECURITY,RATE_LIMIT,DDoS,AUTH_MW,JWT_VALIDATOR,OAUTH_HANDLER,PERM_CHECK securityTier
    class REQ_VALIDATOR,SCHEMA_VALIDATION,CORRELATION,PERF_MONITOR,API_ROUTER,VERSION_HANDLER,ROUTE_MATCHER appTier
    class AUTH_CTRL,MEDIA_CTRL,PLEX_CTRL,DASHBOARD_CTRL,ADMIN_CTRL,YOUTUBE_CTRL appTier
    class AUTH_SVC,MEDIA_SVC,PLEX_SVC,CACHE_SVC,NOTIF_SVC,HEALTH_SVC,YOUTUBE_SVC appTier
    class USER_REPO,MEDIA_REPO,YOUTUBE_REPO,SERVICE_REPO,ERROR_REPO,POSTGRES,REDIS,FILES dataTier
    class METRICS,LOGS,TRACING,ALERTS monitoringTier</code></pre><h3 id="2-authentication-data-flow">2. Authentication Data Flow<a class="headerlink" href="#2-authentication-data-flow" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>sequenceDiagram
    participant C as Client
    participant R as Auth Route
    participant AC as Auth Controller
    participant AS as Auth Service
    participant JS as JWT Service
    participant UR as User Repository
    participant DB as Database
    participant RC as Redis Cache
    participant SS as Socket Service

    Note over C,SS: User Login Process
    C-&gt;&gt;R: POST /api/v1/auth/login {email, password}
    R-&gt;&gt;AC: authenticate(credentials)
    AC-&gt;&gt;AS: validateCredentials(email, password)
    AS-&gt;&gt;UR: findByEmail(email)
    UR-&gt;&gt;DB: SELECT * FROM users WHERE email = ?
    DB--&gt;&gt;UR: User record
    UR--&gt;&gt;AS: User object
    AS-&gt;&gt;AS: bcrypt.compare(password, user.passwordHash)
    AS-&gt;&gt;JS: generateTokenPair(user)
    JS-&gt;&gt;JS: Create access &amp; refresh tokens
    JS--&gt;&gt;AS: {accessToken, refreshToken}
    AS-&gt;&gt;RC: SET session:{userId} {tokens, metadata}
    AS-&gt;&gt;UR: updateLastLoginAt(userId)
    UR-&gt;&gt;DB: UPDATE users SET last_login_at = NOW()
    AS--&gt;&gt;AC: {user, tokens, sessionId}
    AC-&gt;&gt;SS: notifyUserLogin(userId)
    SS-&gt;&gt;SS: Join user to socket rooms
    AC--&gt;&gt;R: Authentication result
    R--&gt;&gt;C: 200 {user, tokens, permissions}

    Note over C,SS: Subsequent Authenticated Requests
    C-&gt;&gt;R: GET /api/v1/dashboard (with JWT)
    R-&gt;&gt;R: authenticate middleware
    R-&gt;&gt;JS: verifyToken(jwt)
    JS-&gt;&gt;RC: GET session:{userId}
    RC--&gt;&gt;JS: Session data
    JS--&gt;&gt;R: Valid user context
    R-&gt;&gt;AC: getDashboard(user)
    AC--&gt;&gt;R: Dashboard data
    R--&gt;&gt;C: 200 {dashboard}</code></pre><h3 id="3-media-request-data-flow">3. Media Request Data Flow<a class="headerlink" href="#3-media-request-data-flow" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>flowchart TD
    subgraph "Client Interaction"
        USER[User Interface]
        SEARCH[Media Search]
        REQUEST[Request Submission]
    end

    subgraph "Media Processing Pipeline"
        SEARCH_API[Search API]
        TMDB_API[TMDB Integration]
        REQUEST_API[Request API]
        VALIDATION[Request Validation]
        STORAGE[Database Storage]
        OVERSEERR_INT[Overseerr Integration]
        NOTIFICATION[Notification System]
    end

    subgraph "Data Storage"
        MEDIA_REQ_TABLE[media_requests table]
        USER_TABLE[users table]
        NOTIF_TABLE[notifications table]
    end

    subgraph "Real-time Updates"
        SOCKET_IO[Socket.IO]
        DASHBOARD_UPDATE[Dashboard Updates]
    end

    subgraph "External Services"
        TMDB[(The Movie DB)]
        OVERSEERR[(Overseerr)]
        PLEX[(Plex Server)]
    end

    USER --&gt; SEARCH
    SEARCH --&gt; SEARCH_API
    SEARCH_API --&gt; TMDB_API
    TMDB_API --&gt; TMDB
    TMDB --&gt; TMDB_API
    TMDB_API --&gt; USER

    USER --&gt; REQUEST
    REQUEST --&gt; REQUEST_API
    REQUEST_API --&gt; VALIDATION
    VALIDATION --&gt; STORAGE
    STORAGE --&gt; MEDIA_REQ_TABLE
    STORAGE --&gt; OVERSEERR_INT
    OVERSEERR_INT --&gt; OVERSEERR
    OVERSEERR --&gt; OVERSEERR_INT
    OVERSEERR_INT --&gt; NOTIFICATION
    NOTIFICATION --&gt; NOTIF_TABLE
    NOTIFICATION --&gt; SOCKET_IO
    SOCKET_IO --&gt; DASHBOARD_UPDATE
    DASHBOARD_UPDATE --&gt; USER

    OVERSEERR --&gt; PLEX
    PLEX --&gt; OVERSEERR</code></pre><h3 id="4-real-time-notification-data-flow">4. Real-time Notification Data Flow<a class="headerlink" href="#4-real-time-notification-data-flow" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>sequenceDiagram
    participant S as Service Layer
    participant NS as Notification Service
    participant RC as Redis Cache
    participant DB as PostgreSQL
    participant SS as Socket Service
    participant WS as WebSocket
    participant C as Client

    Note over S,C: Real-time Notification Flow
    S-&gt;&gt;NS: createNotification(userId, type, data)
    NS-&gt;&gt;DB: INSERT INTO notifications
    DB--&gt;&gt;NS: Notification ID
    NS-&gt;&gt;RC: PUBLISH notification:{userId} {data}
    NS-&gt;&gt;SS: emitToUser(userId, 'notification', data)
    SS-&gt;&gt;SS: Find user socket connections
    SS-&gt;&gt;WS: emit('notification', data)
    WS--&gt;&gt;C: Real-time notification
    NS--&gt;&gt;S: Notification created

    Note over S,C: Batch Notification Processing
    S-&gt;&gt;NS: createBulkNotifications(userIds[], data)
    loop For each user
        NS-&gt;&gt;DB: INSERT INTO notifications
        NS-&gt;&gt;RC: PUBLISH notification:{userId}
        NS-&gt;&gt;SS: emitToUser(userId, 'notification', data)
    end
    NS--&gt;&gt;S: Bulk notifications sent

    Note over S,C: Notification History Retrieval
    C-&gt;&gt;SS: getNotifications(userId, pagination)
    SS-&gt;&gt;DB: SELECT FROM notifications WHERE user_id
    DB--&gt;&gt;SS: Notification records
    SS-&gt;&gt;RC: Cache recent notifications
    SS--&gt;&gt;C: Paginated notifications</code></pre><h3 id="5-enhanced-youtube-download-workflow">5. Enhanced YouTube Download Workflow<a class="headerlink" href="#5-enhanced-youtube-download-workflow" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>flowchart TD
    subgraph "User Experience Layer"
        YT_FORM[YouTube URL Form]
        PROGRESS_UI[Real-time Progress UI]
        COMPLETION_UI[Completion Dashboard]
        ERROR_UI[Error Display]
    end

    subgraph "API Gateway Layer"
        YT_ENDPOINT[YouTube API Endpoint]
        AUTH_CHECK[Authentication Check]
        RATE_LIMIT_CHECK[Rate Limit Check]
        INPUT_VALIDATION[Input Validation]
    end

    subgraph "Business Logic Layer"
        YT_SERVICE[YouTube Service]
        URL_PROCESSOR[URL Processor]
        METADATA_EXTRACTOR[Metadata Extractor]
        DUPLICATE_CHECKER[Duplicate Checker]
        QUEUE_MANAGER[Queue Manager]
    end

    subgraph "Background Processing"
        JOB_SCHEDULER[Job Scheduler]
        DOWNLOAD_WORKER[Download Worker Pool]
        YT_DLP_ENGINE[yt-dlp Engine]
        PROGRESS_TRACKER[Progress Tracker]
        QUALITY_SELECTOR[Quality Selector]
        SUBTITLE_PROCESSOR[Subtitle Processor]
    end

    subgraph "File Management"
        TEMP_STORAGE[Temporary Storage]
        FILE_PROCESSOR[File Processor]
        FORMAT_CONVERTER[Format Converter]
        FILE_MOVER[File Mover]
        CLEANUP_SERVICE[Cleanup Service]
    end

    subgraph "Plex Integration"
        COLLECTION_MANAGER[Collection Manager]
        METADATA_UPDATER[Metadata Updater]
        LIBRARY_SCANNER[Library Scanner]
        THUMBNAIL_GENERATOR[Thumbnail Generator]
    end

    subgraph "Data Management"
        DOWNLOAD_REPO[Download Repository]
        PROGRESS_CACHE[Progress Cache]
        METADATA_CACHE[Metadata Cache]
        ERROR_LOGGER[Error Logger]
        AUDIT_LOGGER[Audit Logger]
    end

    subgraph "Notification System"
        NOTIF_ENGINE[Notification Engine]
        WEBSOCKET_NOTIF[WebSocket Notifications]
        EMAIL_NOTIF[Email Notifications]
        WEBHOOK_NOTIF[Webhook Notifications]
    end

    subgraph "Storage Layer"
        POSTGRES_DB[(PostgreSQL)]
        REDIS_CACHE[(Redis Cache)]
        FILE_STORAGE[(File Storage)]
    end

    subgraph "Monitoring &amp; Observability"
        PERF_MONITOR[Performance Monitor]
        ERROR_TRACKER[Error Tracker]
        QUEUE_METRICS[Queue Metrics]
        DOWNLOAD_ANALYTICS[Download Analytics]
    end

    %% User Flow
    YT_FORM --&gt; YT_ENDPOINT

    %% API Gateway
    YT_ENDPOINT --&gt; AUTH_CHECK
    AUTH_CHECK --&gt; RATE_LIMIT_CHECK
    RATE_LIMIT_CHECK --&gt; INPUT_VALIDATION
    INPUT_VALIDATION --&gt; YT_SERVICE

    %% Business Logic
    YT_SERVICE --&gt; URL_PROCESSOR
    URL_PROCESSOR --&gt; METADATA_EXTRACTOR
    METADATA_EXTRACTOR --&gt; DUPLICATE_CHECKER
    DUPLICATE_CHECKER --&gt; QUEUE_MANAGER

    %% Background Processing
    QUEUE_MANAGER --&gt; JOB_SCHEDULER
    JOB_SCHEDULER --&gt; DOWNLOAD_WORKER
    DOWNLOAD_WORKER --&gt; YT_DLP_ENGINE
    YT_DLP_ENGINE --&gt; PROGRESS_TRACKER
    YT_DLP_ENGINE --&gt; QUALITY_SELECTOR
    YT_DLP_ENGINE --&gt; SUBTITLE_PROCESSOR

    %% File Processing
    SUBTITLE_PROCESSOR --&gt; TEMP_STORAGE
    TEMP_STORAGE --&gt; FILE_PROCESSOR
    FILE_PROCESSOR --&gt; FORMAT_CONVERTER
    FORMAT_CONVERTER --&gt; FILE_MOVER
    FILE_MOVER --&gt; CLEANUP_SERVICE

    %% Plex Integration
    FILE_MOVER --&gt; COLLECTION_MANAGER
    COLLECTION_MANAGER --&gt; METADATA_UPDATER
    METADATA_UPDATER --&gt; LIBRARY_SCANNER
    LIBRARY_SCANNER --&gt; THUMBNAIL_GENERATOR

    %% Data Management
    YT_SERVICE --&gt; DOWNLOAD_REPO
    PROGRESS_TRACKER --&gt; PROGRESS_CACHE
    METADATA_EXTRACTOR --&gt; METADATA_CACHE
    DOWNLOAD_WORKER --&gt; ERROR_LOGGER
    YT_SERVICE --&gt; AUDIT_LOGGER

    %% Notifications
    PROGRESS_TRACKER --&gt; NOTIF_ENGINE
    THUMBNAIL_GENERATOR --&gt; NOTIF_ENGINE
    ERROR_LOGGER --&gt; NOTIF_ENGINE
    NOTIF_ENGINE --&gt; WEBSOCKET_NOTIF
    NOTIF_ENGINE --&gt; EMAIL_NOTIF
    NOTIF_ENGINE --&gt; WEBHOOK_NOTIF

    %% UI Updates
    WEBSOCKET_NOTIF --&gt; PROGRESS_UI
    WEBSOCKET_NOTIF --&gt; COMPLETION_UI
    WEBSOCKET_NOTIF --&gt; ERROR_UI

    %% Storage
    DOWNLOAD_REPO --&gt; POSTGRES_DB
    PROGRESS_CACHE --&gt; REDIS_CACHE
    METADATA_CACHE --&gt; REDIS_CACHE
    TEMP_STORAGE --&gt; FILE_STORAGE
    FILE_MOVER --&gt; FILE_STORAGE

    %% Monitoring
    DOWNLOAD_WORKER --&gt; PERF_MONITOR
    ERROR_LOGGER --&gt; ERROR_TRACKER
    QUEUE_MANAGER --&gt; QUEUE_METRICS
    YT_SERVICE --&gt; DOWNLOAD_ANALYTICS

    classDef userLayer fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef apiLayer fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef businessLayer fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef processingLayer fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef storageLayer fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef notificationLayer fill:#fce4ec,stroke:#c2185b,stroke-width:2px

    class YT_FORM,PROGRESS_UI,COMPLETION_UI,ERROR_UI userLayer
    class YT_ENDPOINT,AUTH_CHECK,RATE_LIMIT_CHECK,INPUT_VALIDATION apiLayer
    class YT_SERVICE,URL_PROCESSOR,METADATA_EXTRACTOR,DUPLICATE_CHECKER,QUEUE_MANAGER businessLayer
    class JOB_SCHEDULER,DOWNLOAD_WORKER,YT_DLP_ENGINE,PROGRESS_TRACKER,QUALITY_SELECTOR,SUBTITLE_PROCESSOR processingLayer
    class DOWNLOAD_REPO,PROGRESS_CACHE,METADATA_CACHE,POSTGRES_DB,REDIS_CACHE,FILE_STORAGE storageLayer
    class NOTIF_ENGINE,WEBSOCKET_NOTIF,EMAIL_NOTIF,WEBHOOK_NOTIF notificationLayer</code></pre><h2 id="database-transaction-patterns">Database Transaction Patterns<a class="headerlink" href="#database-transaction-patterns" title="Permanent link">&para;</a></h2><h3 id="1-user-authentication-transactions">1. User Authentication Transactions<a class="headerlink" href="#1-user-authentication-transactions" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>sequenceDiagram
    participant A as Auth Service
    participant T as Transaction
    participant U as Users Table
    participant S as Sessions Table
    participant R as Rate Limits Table

    A-&gt;&gt;T: BEGIN TRANSACTION
    A-&gt;&gt;U: UPDATE last_login_at = NOW()
    A-&gt;&gt;S: INSERT new session
    A-&gt;&gt;R: UPDATE request_count
    T-&gt;&gt;T: COMMIT
    Note over A,R: All or nothing - maintains data consistency</code></pre><h3 id="2-media-request-transactions">2. Media Request Transactions<a class="headerlink" href="#2-media-request-transactions" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>sequenceDiagram
    participant M as Media Service
    participant T as Transaction
    participant MR as Media Requests Table
    participant N as Notifications Table
    participant O as Overseerr API

    M-&gt;&gt;T: BEGIN TRANSACTION
    M-&gt;&gt;MR: INSERT media request
    M-&gt;&gt;N: INSERT notification record
    T-&gt;&gt;T: COMMIT
    Note over M,O: Database committed before external API
    M-&gt;&gt;O: Submit to Overseerr
    Note over M,O: External API failure doesn't affect database</code></pre><h2 id="advanced-caching-strategy">Advanced Caching Strategy<a class="headerlink" href="#advanced-caching-strategy" title="Permanent link">&para;</a></h2><h3 id="1-multi-tier-caching-architecture">1. Multi-Tier Caching Architecture<a class="headerlink" href="#1-multi-tier-caching-architecture" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>flowchart TD
    subgraph "Client-Side Caching"
        BROWSER_CACHE[Browser Cache]
        LOCAL_STORAGE[Local Storage]
        SESSION_STORAGE[Session Storage]
        SERVICE_WORKER[Service Worker Cache]
    end

    subgraph "Edge Caching"
        CDN_CACHE[CDN Cache]
        EDGE_SERVERS[Edge Servers]
        GEO_CACHE[Geographic Cache]
    end

    subgraph "Reverse Proxy Caching"
        NGINX_CACHE[Nginx Cache]
        STATIC_CACHE[Static File Cache]
        API_CACHE[API Response Cache]
    end

    subgraph "Application Caching"
        MEMORY_CACHE[In-Memory Cache]
        SESSION_CACHE[Session Cache]
        QUERY_CACHE[Query Result Cache]
        COMPUTED_CACHE[Computed Value Cache]
    end

    subgraph "Distributed Caching"
        REDIS_CLUSTER[Redis Cluster]
        REDIS_MASTER[Redis Master]
        REDIS_SLAVES[Redis Slaves]
        REDIS_SENTINEL[Redis Sentinel]
    end

    subgraph "Database Caching"
        QUERY_PLAN_CACHE[Query Plan Cache]
        RESULT_SET_CACHE[Result Set Cache]
        CONNECTION_POOL[Connection Pool]
        PREPARED_STATEMENTS[Prepared Statements Cache]
    end

    subgraph "Smart Cache Management"
        CACHE_WARMER[Cache Warmer]
        CACHE_INVALIDATOR[Cache Invalidator]
        TTL_MANAGER[TTL Manager]
        CACHE_ANALYTICS[Cache Analytics]
    end

    CLIENT[Client Request] --&gt; BROWSER_CACHE
    BROWSER_CACHE --&gt; LOCAL_STORAGE
    LOCAL_STORAGE --&gt; SESSION_STORAGE
    SESSION_STORAGE --&gt; SERVICE_WORKER
    SERVICE_WORKER --&gt; CDN_CACHE

    CDN_CACHE --&gt; EDGE_SERVERS
    EDGE_SERVERS --&gt; GEO_CACHE
    GEO_CACHE --&gt; NGINX_CACHE

    NGINX_CACHE --&gt; STATIC_CACHE
    STATIC_CACHE --&gt; API_CACHE
    API_CACHE --&gt; MEMORY_CACHE

    MEMORY_CACHE --&gt; SESSION_CACHE
    SESSION_CACHE --&gt; QUERY_CACHE
    QUERY_CACHE --&gt; COMPUTED_CACHE
    COMPUTED_CACHE --&gt; REDIS_CLUSTER

    REDIS_CLUSTER --&gt; REDIS_MASTER
    REDIS_MASTER --&gt; REDIS_SLAVES
    REDIS_SLAVES --&gt; REDIS_SENTINEL
    REDIS_SENTINEL --&gt; QUERY_PLAN_CACHE

    QUERY_PLAN_CACHE --&gt; RESULT_SET_CACHE
    RESULT_SET_CACHE --&gt; CONNECTION_POOL
    CONNECTION_POOL --&gt; PREPARED_STATEMENTS
    PREPARED_STATEMENTS --&gt; DATABASE[(Primary Database)]

    %% Cache Management
    CACHE_WARMER --&gt; REDIS_CLUSTER
    CACHE_INVALIDATOR --&gt; REDIS_CLUSTER
    TTL_MANAGER --&gt; REDIS_CLUSTER
    CACHE_ANALYTICS --&gt; REDIS_CLUSTER

    classDef clientCache fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef edgeCache fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef proxyCache fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef appCache fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef distributedCache fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef dbCache fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef management fill:#f1f8e9,stroke:#689f38,stroke-width:2px

    class BROWSER_CACHE,LOCAL_STORAGE,SESSION_STORAGE,SERVICE_WORKER clientCache
    class CDN_CACHE,EDGE_SERVERS,GEO_CACHE edgeCache
    class NGINX_CACHE,STATIC_CACHE,API_CACHE proxyCache
    class MEMORY_CACHE,SESSION_CACHE,QUERY_CACHE,COMPUTED_CACHE appCache
    class REDIS_CLUSTER,REDIS_MASTER,REDIS_SLAVES,REDIS_SENTINEL distributedCache
    class QUERY_PLAN_CACHE,RESULT_SET_CACHE,CONNECTION_POOL,PREPARED_STATEMENTS dbCache
    class CACHE_WARMER,CACHE_INVALIDATOR,TTL_MANAGER,CACHE_ANALYTICS management</code></pre><h3 id="2-intelligent-cache-invalidation-system">2. Intelligent Cache Invalidation System<a class="headerlink" href="#2-intelligent-cache-invalidation-system" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>flowchart TD
    subgraph "Cache Invalidation Triggers"
        DATA_CHANGE[Data Change Event]
        USER_ACTION[User Action]
        SCHEDULED_JOB[Scheduled Job]
        EXTERNAL_EVENT[External Event]
        MANUAL_TRIGGER[Manual Trigger]
    end

    subgraph "Invalidation Strategy Engine"
        STRATEGY_SELECTOR[Strategy Selector]
        PATTERN_MATCHER[Pattern Matcher]
        DEPENDENCY_ANALYZER[Dependency Analyzer]
        IMPACT_CALCULATOR[Impact Calculator]
    end

    subgraph "Invalidation Patterns"
        IMMEDIATE[Immediate Invalidation]
        LAZY[Lazy Invalidation]
        WRITE_THROUGH[Write-Through]
        WRITE_BEHIND[Write-Behind]
        WRITE_AROUND[Write-Around]
        REFRESH_AHEAD[Refresh-Ahead]
    end

    subgraph "Cache Layers"
        L1_BROWSER[Browser Cache]
        L2_CDN[CDN Cache]
        L3_NGINX[Nginx Cache]
        L4_APP[Application Cache]
        L5_REDIS[Redis Cache]
        L6_DB[Database Cache]
    end

    subgraph "Invalidation Mechanisms"
        TAG_BASED[Tag-Based Invalidation]
        TIME_BASED[Time-Based (TTL)]
        EVENT_BASED[Event-Based]
        DEPENDENCY_BASED[Dependency-Based]
        MANUAL_PURGE[Manual Purge]
    end

    subgraph "Notification System"
        CACHE_EVENTS[Cache Events]
        PUB_SUB[Pub/Sub System]
        WEBHOOK_NOTIF[Webhook Notifications]
        REAL_TIME_UPDATES[Real-time Updates]
    end

    subgraph "Monitoring &amp; Analytics"
        HIT_RATE_MONITOR[Hit Rate Monitor]
        MISS_ANALYZER[Miss Analyzer]
        PERFORMANCE_TRACKER[Performance Tracker]
        COST_OPTIMIZER[Cost Optimizer]
    end

    %% Trigger Flow
    DATA_CHANGE --&gt; STRATEGY_SELECTOR
    USER_ACTION --&gt; STRATEGY_SELECTOR
    SCHEDULED_JOB --&gt; STRATEGY_SELECTOR
    EXTERNAL_EVENT --&gt; STRATEGY_SELECTOR
    MANUAL_TRIGGER --&gt; STRATEGY_SELECTOR

    %% Strategy Selection
    STRATEGY_SELECTOR --&gt; PATTERN_MATCHER
    PATTERN_MATCHER --&gt; DEPENDENCY_ANALYZER
    DEPENDENCY_ANALYZER --&gt; IMPACT_CALCULATOR

    %% Pattern Application
    IMPACT_CALCULATOR --&gt; IMMEDIATE
    IMPACT_CALCULATOR --&gt; LAZY
    IMPACT_CALCULATOR --&gt; WRITE_THROUGH
    IMPACT_CALCULATOR --&gt; WRITE_BEHIND
    IMPACT_CALCULATOR --&gt; WRITE_AROUND
    IMPACT_CALCULATOR --&gt; REFRESH_AHEAD

    %% Cache Layer Invalidation
    IMMEDIATE --&gt; L1_BROWSER
    LAZY --&gt; L2_CDN
    WRITE_THROUGH --&gt; L3_NGINX
    WRITE_BEHIND --&gt; L4_APP
    WRITE_AROUND --&gt; L5_REDIS
    REFRESH_AHEAD --&gt; L6_DB

    %% Mechanism Application
    L1_BROWSER --&gt; TAG_BASED
    L2_CDN --&gt; TIME_BASED
    L3_NGINX --&gt; EVENT_BASED
    L4_APP --&gt; DEPENDENCY_BASED
    L5_REDIS --&gt; MANUAL_PURGE

    %% Notification Flow
    TAG_BASED --&gt; CACHE_EVENTS
    TIME_BASED --&gt; PUB_SUB
    EVENT_BASED --&gt; WEBHOOK_NOTIF
    DEPENDENCY_BASED --&gt; REAL_TIME_UPDATES

    %% Monitoring
    L1_BROWSER --&gt; HIT_RATE_MONITOR
    L2_CDN --&gt; MISS_ANALYZER
    L3_NGINX --&gt; PERFORMANCE_TRACKER
    L4_APP --&gt; COST_OPTIMIZER

    classDef trigger fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef strategy fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef pattern fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef cache fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef mechanism fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef notification fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef monitoring fill:#f1f8e9,stroke:#689f38,stroke-width:2px

    class DATA_CHANGE,USER_ACTION,SCHEDULED_JOB,EXTERNAL_EVENT,MANUAL_TRIGGER trigger
    class STRATEGY_SELECTOR,PATTERN_MATCHER,DEPENDENCY_ANALYZER,IMPACT_CALCULATOR strategy
    class IMMEDIATE,LAZY,WRITE_THROUGH,WRITE_BEHIND,WRITE_AROUND,REFRESH_AHEAD pattern
    class L1_BROWSER,L2_CDN,L3_NGINX,L4_APP,L5_REDIS,L6_DB cache
    class TAG_BASED,TIME_BASED,EVENT_BASED,DEPENDENCY_BASED,MANUAL_PURGE mechanism
    class CACHE_EVENTS,PUB_SUB,WEBHOOK_NOTIF,REAL_TIME_UPDATES notification
    class HIT_RATE_MONITOR,MISS_ANALYZER,PERFORMANCE_TRACKER,COST_OPTIMIZER monitoring</code></pre><h2 id="error-handling-data-flow">Error Handling Data Flow<a class="headerlink" href="#error-handling-data-flow" title="Permanent link">&para;</a></h2><h3 id="1-error-propagation">1. Error Propagation<a class="headerlink" href="#1-error-propagation" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>flowchart TD
    subgraph "Error Sources"
        DB_ERROR[Database Error]
        API_ERROR[External API Error]
        VALIDATION_ERROR[Validation Error]
        AUTH_ERROR[Authentication Error]
    end

    subgraph "Error Handling"
        ERROR_MW[Error Middleware]
        ERROR_SERVICE[Error Service]
        ERROR_LOGGER[Error Logger]
        ERROR_TRACKER[Error Tracker]
    end

    subgraph "Error Storage"
        ERROR_LOG_TABLE[error_logs table]
        SENTRY[Sentry]
        LOG_FILES[Log Files]
    end

    subgraph "Error Response"
        CLIENT_ERROR[Client Error Response]
        ADMIN_ALERT[Admin Alert]
        MONITORING[Monitoring Alert]
    end

    DB_ERROR --&gt; ERROR_MW
    API_ERROR --&gt; ERROR_MW
    VALIDATION_ERROR --&gt; ERROR_MW
    AUTH_ERROR --&gt; ERROR_MW

    ERROR_MW --&gt; ERROR_SERVICE
    ERROR_SERVICE --&gt; ERROR_LOGGER
    ERROR_SERVICE --&gt; ERROR_TRACKER

    ERROR_LOGGER --&gt; ERROR_LOG_TABLE
    ERROR_LOGGER --&gt; LOG_FILES
    ERROR_TRACKER --&gt; SENTRY

    ERROR_SERVICE --&gt; CLIENT_ERROR
    ERROR_SERVICE --&gt; ADMIN_ALERT
    ERROR_TRACKER --&gt; MONITORING</code></pre><h3 id="2-circuit-breaker-pattern">2. Circuit Breaker Pattern<a class="headerlink" href="#2-circuit-breaker-pattern" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; Closed
    Closed --&gt; Open : Failure threshold exceeded
    Open --&gt; HalfOpen : Timeout period elapsed
    HalfOpen --&gt; Closed : Success threshold met
    HalfOpen --&gt; Open : Any failure occurs

    state Closed {
        [*] --&gt; Normal
        Normal --&gt; CountingFailures : Request fails
        CountingFailures --&gt; Normal : Request succeeds
        CountingFailures --&gt; [*] : Threshold reached
    }

    state Open {
        [*] --&gt; Blocking
        Blocking --&gt; [*] : All requests rejected
    }

    state HalfOpen {
        [*] --&gt; Testing
        Testing --&gt; [*] : Limited requests allowed
    }</code></pre><h2 id="performance-monitoring-data-flow">Performance Monitoring Data Flow<a class="headerlink" href="#performance-monitoring-data-flow" title="Permanent link">&para;</a></h2><h3 id="1-metrics-collection">1. Metrics Collection<a class="headerlink" href="#1-metrics-collection" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>flowchart LR
    subgraph "Application Metrics"
        REQUEST_COUNTER[Request Counter]
        RESPONSE_TIME[Response Time]
        ERROR_RATE[Error Rate]
        ACTIVE_CONNECTIONS[Active Connections]
    end

    subgraph "Business Metrics"
        USER_SESSIONS[User Sessions]
        MEDIA_REQUESTS[Media Requests]
        DOWNLOAD_JOBS[Download Jobs]
        API_USAGE[API Usage]
    end

    subgraph "System Metrics"
        CPU_USAGE[CPU Usage]
        MEMORY_USAGE[Memory Usage]
        DISK_IO[Disk I/O]
        NETWORK_IO[Network I/O]
    end

    subgraph "Monitoring Stack"
        PROMETHEUS[Prometheus]
        GRAFANA[Grafana]
        ALERTMANAGER[Alert Manager]
    end

    REQUEST_COUNTER --&gt; PROMETHEUS
    RESPONSE_TIME --&gt; PROMETHEUS
    ERROR_RATE --&gt; PROMETHEUS
    ACTIVE_CONNECTIONS --&gt; PROMETHEUS

    USER_SESSIONS --&gt; PROMETHEUS
    MEDIA_REQUESTS --&gt; PROMETHEUS
    DOWNLOAD_JOBS --&gt; PROMETHEUS
    API_USAGE --&gt; PROMETHEUS

    CPU_USAGE --&gt; PROMETHEUS
    MEMORY_USAGE --&gt; PROMETHEUS
    DISK_IO --&gt; PROMETHEUS
    NETWORK_IO --&gt; PROMETHEUS

    PROMETHEUS --&gt; GRAFANA
    PROMETHEUS --&gt; ALERTMANAGER</code></pre><h2 id="advanced-data-flow-patterns">Advanced Data Flow Patterns<a class="headerlink" href="#advanced-data-flow-patterns" title="Permanent link">&para;</a></h2><h3 id="1-event-driven-architecture-pattern">1. Event-Driven Architecture Pattern<a class="headerlink" href="#1-event-driven-architecture-pattern" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>flowchart TD
    subgraph "Event Sources"
        USER_ACTION[User Actions]
        SYSTEM_EVENT[System Events]
        EXTERNAL_EVENT[External Events]
        SCHEDULED_EVENT[Scheduled Events]
    end

    subgraph "Event Bus"
        EVENT_ROUTER[Event Router]
        EVENT_STORE[Event Store]
        EVENT_REPLAY[Event Replay]
    end

    subgraph "Event Processors"
        AUTH_PROCESSOR[Auth Event Processor]
        MEDIA_PROCESSOR[Media Event Processor]
        NOTIF_PROCESSOR[Notification Processor]
        AUDIT_PROCESSOR[Audit Event Processor]
        METRICS_PROCESSOR[Metrics Processor]
    end

    subgraph "State Management"
        READ_MODELS[Read Models]
        PROJECTIONS[Event Projections]
        SNAPSHOTS[State Snapshots]
    end

    subgraph "Side Effects"
        NOTIFICATIONS[Push Notifications]
        WEBHOOKS[Webhook Calls]
        EMAIL_ALERTS[Email Alerts]
        EXTERNAL_API[External API Calls]
    end

    USER_ACTION --&gt; EVENT_ROUTER
    SYSTEM_EVENT --&gt; EVENT_ROUTER
    EXTERNAL_EVENT --&gt; EVENT_ROUTER
    SCHEDULED_EVENT --&gt; EVENT_ROUTER

    EVENT_ROUTER --&gt; EVENT_STORE
    EVENT_STORE --&gt; AUTH_PROCESSOR
    EVENT_STORE --&gt; MEDIA_PROCESSOR
    EVENT_STORE --&gt; NOTIF_PROCESSOR
    EVENT_STORE --&gt; AUDIT_PROCESSOR
    EVENT_STORE --&gt; METRICS_PROCESSOR

    AUTH_PROCESSOR --&gt; READ_MODELS
    MEDIA_PROCESSOR --&gt; PROJECTIONS
    NOTIF_PROCESSOR --&gt; SNAPSHOTS

    NOTIF_PROCESSOR --&gt; NOTIFICATIONS
    AUDIT_PROCESSOR --&gt; WEBHOOKS
    METRICS_PROCESSOR --&gt; EMAIL_ALERTS
    MEDIA_PROCESSOR --&gt; EXTERNAL_API

    EVENT_STORE --&gt; EVENT_REPLAY
    EVENT_REPLAY --&gt; PROJECTIONS

    classDef eventSource fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef eventBus fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef processor fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef state fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef sideEffect fill:#ffebee,stroke:#d32f2f,stroke-width:2px

    class USER_ACTION,SYSTEM_EVENT,EXTERNAL_EVENT,SCHEDULED_EVENT eventSource
    class EVENT_ROUTER,EVENT_STORE,EVENT_REPLAY eventBus
    class AUTH_PROCESSOR,MEDIA_PROCESSOR,NOTIF_PROCESSOR,AUDIT_PROCESSOR,METRICS_PROCESSOR processor
    class READ_MODELS,PROJECTIONS,SNAPSHOTS state
    class NOTIFICATIONS,WEBHOOKS,EMAIL_ALERTS,EXTERNAL_API sideEffect</code></pre><h3 id="2-cqrs-command-query-responsibility-segregation-pattern">2. CQRS (Command Query Responsibility Segregation) Pattern<a class="headerlink" href="#2-cqrs-command-query-responsibility-segregation-pattern" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>flowchart LR
    subgraph "Command Side (Write)"
        CMD_API[Command API]
        CMD_HANDLERS[Command Handlers]
        DOMAIN_MODELS[Domain Models]
        EVENT_SOURCING[Event Sourcing]
        WRITE_DB[(Write Database)]
    end

    subgraph "Query Side (Read)"
        QUERY_API[Query API]
        QUERY_HANDLERS[Query Handlers]
        READ_MODELS[Read Models]
        MATERIALIZED_VIEWS[Materialized Views]
        READ_DB[(Read Database)]
    end

    subgraph "Event Stream"
        EVENT_BUS[Event Bus]
        EVENT_PROJECTOR[Event Projector]
    end

    subgraph "Client Applications"
        WEB_APP[Web Application]
        MOBILE_APP[Mobile App]
        API_CLIENTS[API Clients]
    end

    %% Command Flow
    WEB_APP --&gt;|Commands| CMD_API
    MOBILE_APP --&gt;|Commands| CMD_API
    API_CLIENTS --&gt;|Commands| CMD_API

    CMD_API --&gt; CMD_HANDLERS
    CMD_HANDLERS --&gt; DOMAIN_MODELS
    DOMAIN_MODELS --&gt; EVENT_SOURCING
    EVENT_SOURCING --&gt; WRITE_DB

    %% Event Flow
    EVENT_SOURCING --&gt; EVENT_BUS
    EVENT_BUS --&gt; EVENT_PROJECTOR
    EVENT_PROJECTOR --&gt; read_MODELS
    read_MODELS --&gt; MATERIALIZED_VIEWS
    MATERIALIZED_VIEWS --&gt; READ_DB

    %% Query Flow
    WEB_APP --&gt;|Queries| QUERY_API
    MOBILE_APP --&gt;|Queries| QUERY_API
    API_CLIENTS --&gt;|Queries| QUERY_API

    QUERY_API --&gt; QUERY_HANDLERS
    QUERY_HANDLERS --&gt; READ_DB

    classDef command fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef query fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef event fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef client fill:#e3f2fd,stroke:#1976d2,stroke-width:2px

    class CMD_API,CMD_HANDLERS,DOMAIN_MODELS,EVENT_SOURCING,WRITE_DB command
    class QUERY_API,QUERY_HANDLERS,READ_MODELS,MATERIALIZED_VIEWS,READ_DB query
    class EVENT_BUS,EVENT_PROJECTOR event
    class WEB_APP,MOBILE_APP,API_CLIENTS client</code></pre><h2 id="data-consistency-patterns">Data Consistency Patterns<a class="headerlink" href="#data-consistency-patterns" title="Permanent link">&para;</a></h2><h3 id="1-eventual-consistency-for-external-apis">1. Eventual Consistency for External APIs<a class="headerlink" href="#1-eventual-consistency-for-external-apis" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>sequenceDiagram
    participant MS as Media Service
    participant DB as Database
    participant OS as Overseerr Service
    participant PS as Plex Service
    participant NS as Notification Service

    Note over MS,NS: Eventual Consistency Pattern
    MS-&gt;&gt;DB: Store media request (COMMITTED)
    MS-&gt;&gt;OS: Submit to Overseerr (ASYNC)
    alt Overseerr Success
        OS--&gt;&gt;MS: Request accepted
        MS-&gt;&gt;DB: Update status = 'submitted'
        MS-&gt;&gt;NS: Notify user of submission
    else Overseerr Failure
        OS--&gt;&gt;MS: Request failed
        MS-&gt;&gt;DB: Update status = 'failed'
        MS-&gt;&gt;NS: Notify user of failure
    end

    Note over MS,NS: Plex Integration (Eventual)
    OS-&gt;&gt;PS: Media downloaded
    PS-&gt;&gt;OS: Confirm addition
    OS-&gt;&gt;MS: Webhook notification
    MS-&gt;&gt;DB: Update status = 'completed'
    MS-&gt;&gt;NS: Notify user of completion</code></pre><h3 id="2-strong-consistency-for-critical-operations">2. Strong Consistency for Critical Operations<a class="headerlink" href="#2-strong-consistency-for-critical-operations" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>sequenceDiagram
    participant AS as Auth Service
    participant DB as Database
    participant RC as Redis Cache
    participant SS as Socket Service

    Note over AS,SS: Strong Consistency for Authentication
    AS-&gt;&gt;DB: BEGIN TRANSACTION
    AS-&gt;&gt;DB: UPDATE user last_login
    AS-&gt;&gt;DB: INSERT session token
    AS-&gt;&gt;DB: UPDATE rate limits
    AS-&gt;&gt;DB: COMMIT TRANSACTION

    Note over AS,SS: Cache updates after DB commit
    AS-&gt;&gt;RC: Cache user session
    AS-&gt;&gt;RC: Cache rate limit data
    AS-&gt;&gt;SS: Update user socket rooms

    Note over AS,SS: All operations must succeed together</code></pre><aside class="md-source-file"><span class="md-source-file__fact"><span class="md-icon" title="Last update"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="September 12, 2025 20:05:39 UTC"><span class="timeago" datetime="2025-09-12T20:05:39+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="September 12, 2025 20:05:39 UTC">2025-09-12</span></span><span class="md-source-file__fact"><span class="md-icon" title="Created"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="September 9, 2025 20:59:11 UTC"><span class="timeago" datetime="2025-09-09T20:59:11+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="September 9, 2025 20:59:11 UTC">2025-09-09</span></span></aside><form class="md-feedback" name="feedback" hidden><fieldset><legend class="md-feedback__title"> Was this page helpful? </legend><div class="md-feedback__inner"><div class="md-feedback__list"><button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg></button><button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg></button></div><div class="md-feedback__note"><div data-md-value="1" hidden> Thanks for your feedback! Consider starring us on <a href="https://github.com/kinginyellow/medianest" target="_blank" rel="noopener">GitHub</a> and sharing with the community. </div><div data-md-value="0" hidden> Thanks for your feedback! Help us improve by <a href="https://github.com/kinginyellow/medianest/issues/new/?title=[Docs]+Data%20Flow+-+/architecture/data-flow/" target="_blank" rel="noopener">creating an issue</a> or <a href="https://github.com/kinginyellow/medianest/edit/develop/docs/{path}" target="_blank" rel="noopener">editing this page</a>. </div></div></div></fieldset></form></article></div><script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type="button" class="md-top md-icon" data-md-component="top" hidden><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button></main><footer class="md-footer"><nav class="md-footer__inner md-grid" aria-label="Footer"><a href="../component-architecture/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Component Architecture"><div class="md-footer__button md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></div><div class="md-footer__title"><span class="md-footer__direction"> Previous </span><div class="md-ellipsis"> Component Architecture </div></div></a><a href="../system-overview/" class="md-footer__link md-footer__link--next" aria-label="Next: System Overview"><div class="md-footer__title"><span class="md-footer__direction"> Next </span><div class="md-ellipsis"> System Overview </div></div><div class="md-footer__button md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg></div></a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class="md-copyright"><div class="md-copyright__highlight"> Copyright &copy; 2024 MediaNest Development Team - <a href="#__consent">Manage Cookies</a> | <a href="/privacy">Privacy Policy</a> | <a href="/terms">Terms of Service</a></div></div><div class="md-social"><a href="https://github.com/kinginyellow/medianest" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></a><a href="https://hub.docker.com/r/medianest/medianest" target="_blank" rel="noopener" title="Docker Hub" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 640 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg></a><a href="https://discord.gg/medianest" target="_blank" rel="noopener" title="Discord Community" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg></a><a href="https://twitter.com/medianest" target="_blank" rel="noopener" title="Twitter Updates" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg></a><a href="https://medianest.com" target="_blank" rel="noopener" title="Official Website" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg></a><a href="https://kinginyellow.github.io/medianest/" target="_blank" rel="noopener" title="Documentation" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M384 512H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h304c26.5 0 48 21.5 48 48v288c0 20.9-13.4 38.7-32 45.3V448c17.7 0 32 14.3 32 32s-14.3 32-32 32zM96 384c-17.7 0-32 14.3-32 32s14.3 32 32 32h256v-64zm32-232c0 13.3 10.7 24 24 24h176c13.3 0 24-10.7 24-24s-10.7-24-24-24H152c-13.3 0-24 10.7-24 24m24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24h176c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/></svg></a></div></div></div></footer></div><div class="md-dialog" data-md-component="dialog"><div class="md-dialog__inner md-typeset"></div></div><div class="md-progress" data-md-component="progress" role="progressbar"></div><div class="md-consent" data-md-component="consent" id="__consent" hidden><div class="md-consent__overlay"></div><aside class="md-consent__inner"><form class="md-consent__form md-grid md-typeset" name="consent"><h4>Cookie consent</h4><p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p><input class="md-toggle" type="checkbox" id="__settings"><div class="md-consent__settings"><ul class="task-list"><li class="task-list-item"><label class="task-list-control"><input type="checkbox" name="analytics"><span class="task-list-indicator"></span> Google Analytics </label></li><li class="task-list-item"><label class="task-list-control"><input type="checkbox" name="github"><span class="task-list-indicator"></span> GitHub </label></li></ul></div><div class="md-consent__controls"><button class="md-button md-button--primary">Accept</button><button type="reset" class="md-button md-button--primary">Reject</button><label class="md-button" for="__settings">Manage settings</label></div></form></aside></div><script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script><script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": {"API": "api", "Configuration": "config", "Docker": "docker", "Performance": "performance", "Reference": "reference", "Security": "security", "Setup": "setup", "Tutorial": "tutorial"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script><script src="../../assets/javascripts/bundle.92b07e13.min.js"></script><script src="../../js/timeago.min.js"></script><script src="../../js/timeago_mkdocs_material.js"></script><script src="../../javascripts/extra.js"></script><script src="../../javascripts/medianest.js"></script><script src="../../javascripts/search-enhancements.js"></script><script src="../../javascripts/api-explorer.js"></script><script src="../../javascripts/mermaid-config.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script><script src="https://unpkg.com/swagger-ui-dist@4.15.5/swagger-ui-bundle.js"></script></body></html>