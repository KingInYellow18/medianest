<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Complete documentation for MediaNest - Advanced Media Management Platform with Plex Integration, API, and Developer Resources"><meta name="author" content="MediaNest Development Team"><link rel="canonical" href="https://kinginyellow.github.io/medianest/visuals/c4-architecture-diagrams/"><link rel="icon" href="../../assets/images/favicon.ico"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19"><title>MediaNest C4 Architecture Diagrams - MediaNest Documentation</title><link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css"><link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel="stylesheet" href="../../css/timeago.css"><link rel="stylesheet" href="../../stylesheets/extra.css"><link rel="stylesheet" href="../../stylesheets/medianest-theme.css"><link rel="stylesheet" href="../../stylesheets/material-enhancements.css"><link rel="stylesheet" href="../../stylesheets/animations.css"><link rel="stylesheet" href="../../stylesheets/responsive.css"><link rel="stylesheet" href="../../stylesheets/diagram-styles.css"><link rel="stylesheet" href="../../stylesheets/api-docs.css"><link rel="stylesheet" href="../../stylesheets/code-highlights.css"><link rel="stylesheet" href="../../stylesheets/mermaid-custom.css"><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-XXXXXXXXXX"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-XXXXXXXXXX",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script></head><body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple"><input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"><input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"><label class="md-overlay" for="__drawer"></label><div data-md-component="skip"><a href="#medianest-c4-architecture-diagrams" class="md-skip"> Skip to content </a></div><div data-md-component="announce"></div><div data-md-color-scheme="default" data-md-component="outdated" hidden></div><header class="md-header md-header--shadow md-header--lifted" data-md-component="header"><nav class="md-header__inner md-grid" aria-label="Header"><a href="https://kinginyellow.github.io/medianest/" title="MediaNest Documentation" class="md-header__button md-logo" aria-label="MediaNest Documentation" data-md-component="logo"><img src="../../assets/images/logo.svg" alt="logo"></a><label class="md-header__button md-icon" for="__drawer"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class="md-header__title" data-md-component="header-title"><div class="md-header__ellipsis"><div class="md-header__topic"><span class="md-ellipsis"> MediaNest Documentation </span></div><div class="md-header__topic" data-md-component="header-topic"><span class="md-ellipsis"> MediaNest C4 Architecture Diagrams </span></div></div></div><form class="md-header__option" data-md-component="palette"><input class="md-option" data-md-color-media data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_0"><label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label><input class="md-option" data-md-color-media data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="purple" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_1"><label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label></form><script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><label class="md-header__button md-icon" for="__search"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required><label class="md-search__icon md-icon" for="__search"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav class="md-search__options" aria-label="Search"><a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text data-md-component="search-share" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg></a><button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class="md-search__suggest" data-md-component="search-suggest"></div></form><div class="md-search__output"><div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix><div class="md-search-result" data-md-component="search-result"><div class="md-search-result__meta"> Initializing search </div><ol class="md-search-result__list" role="presentation"></ol></div></div></div></div></div><div class="md-header__source"><a href="https://github.com/kinginyellow/medianest" title="Go to repository" class="md-source" data-md-component="source"><div class="md-source__icon md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg></div><div class="md-source__repository"> kinginyellow/medianest </div></a></div></nav><nav class="md-tabs" aria-label="Tabs" data-md-component="tabs"><div class="md-grid"><ul class="md-tabs__list"><li class="md-tabs__item"><a href="../.." class="md-tabs__link"> Home </a></li><li class="md-tabs__item"><a href="../../getting-started/" class="md-tabs__link"> Getting Started </a></li><li class="md-tabs__item"><a href="../../architecture/component-architecture/" class="md-tabs__link"> Architecture </a></li><li class="md-tabs__item"><a href="../../api/overview/" class="md-tabs__link"> API Reference </a></li><li class="md-tabs__item"><a href="../../operations/monitoring-stack/" class="md-tabs__link"> Operations </a></li><li class="md-tabs__item"><a href="../../deployment/ci-cd/" class="md-tabs__link"> Deployment </a></li><li class="md-tabs__item"><a href="../../developers/contributing/" class="md-tabs__link"> Developers </a></li><li class="md-tabs__item"><a href="../database-schema/" class="md-tabs__link"> Visuals </a></li><li class="md-tabs__item"><a href="../../standards/documentation-checklist/" class="md-tabs__link"> Standards </a></li></ul></div></nav></header><div class="md-container" data-md-component="container"><main class="md-main" data-md-component="main"><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0"><label class="md-nav__title" for="__drawer"><a href="https://kinginyellow.github.io/medianest/" title="MediaNest Documentation" class="md-nav__button md-logo" aria-label="MediaNest Documentation" data-md-component="logo"><img src="../../assets/images/logo.svg" alt="logo"></a> MediaNest Documentation </label><div class="md-nav__source"><a href="https://github.com/kinginyellow/medianest" title="Go to repository" class="md-source" data-md-component="source"><div class="md-source__icon md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg></div><div class="md-source__repository"> kinginyellow/medianest </div></a></div><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../.." class="md-nav__link"><span class="md-ellipsis"> Home </span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../getting-started/" class="md-nav__link"><span class="md-ellipsis"> Getting Started </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../architecture/component-architecture/" class="md-nav__link"><span class="md-ellipsis"> Architecture </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../api/overview/" class="md-nav__link"><span class="md-ellipsis"> API Reference </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../operations/monitoring-stack/" class="md-nav__link"><span class="md-ellipsis"> Operations </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../deployment/ci-cd/" class="md-nav__link"><span class="md-ellipsis"> Deployment </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../developers/contributing/" class="md-nav__link"><span class="md-ellipsis"> Developers </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../database-schema/" class="md-nav__link"><span class="md-ellipsis"> Visuals </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href="../../standards/documentation-checklist/" class="md-nav__link"><span class="md-ellipsis"> Standards </span><span class="md-nav__icon md-icon"></span></a></li></ul></nav></div></div></div><div class="md-content" data-md-component="content"><article class="md-content__inner md-typeset"><a href="https://github.com/kinginyellow/medianest/edit/develop/docs/visuals/c4-architecture-diagrams.md" title="Edit this page" class="md-content__button md-icon" rel="edit"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg></a><a href="https://github.com/kinginyellow/medianest/raw/develop/docs/visuals/c4-architecture-diagrams.md" title="View source of this page" class="md-content__button md-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg></a><h1 id="medianest-c4-architecture-diagrams">MediaNest C4 Architecture Diagrams<a class="headerlink" href="#medianest-c4-architecture-diagrams" title="Permanent link">&para;</a></h1><p>This document provides comprehensive C4 model architecture diagrams for MediaNest, following the C4 model methodology for visualizing software architecture.</p><h2 id="level-1-system-context-diagram">Level 1: System Context Diagram<a class="headerlink" href="#level-1-system-context-diagram" title="Permanent link">&para;</a></h2><h3 id="system-landscape-overview">System Landscape Overview<a class="headerlink" href="#system-landscape-overview" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>C4Context
    title MediaNest System Landscape

    Person(content_consumer, "Content Consumer", "Watches and discovers media content")
    Person(media_requester, "Media Requester", "Requests new media content")
    Person(system_admin, "System Administrator", "Manages system configuration and monitoring")
    Person(developer, "Developer", "Develops and maintains the platform")

    Enterprise_Boundary(medianest_enterprise, "MediaNest Enterprise") {
        System(medianest, "MediaNest Platform", "Advanced Media Management Platform with integrated request handling, YouTube downloads, and Plex integration")
        System(monitoring, "Monitoring System", "System observability and alerting platform")
        System(backup, "Backup System", "Data backup and disaster recovery system")
    }

    Enterprise_Boundary(media_ecosystem, "Media Ecosystem") {
        System_Ext(plex_server, "Plex Media Server", "Personal media streaming server")
        System_Ext(overseerr, "Overseerr", "Media request management and automation platform")
        System_Ext(sonarr, "Sonarr", "TV series management and automation")
        System_Ext(radarr, "Radarr", "Movie management and automation")
    }

    Enterprise_Boundary(content_sources, "Content Sources") {
        System_Ext(tmdb, "The Movie Database", "Movie and TV show metadata service")
        System_Ext(youtube, "YouTube", "Video sharing and streaming platform")
        System_Ext(torrents, "Torrent Networks", "P2P content distribution networks")
    }

    Enterprise_Boundary(infrastructure, "Infrastructure Services") {
        System_Ext(cloud_provider, "Cloud Provider", "Hosting and infrastructure services")
        System_Ext(cdn, "Content Delivery Network", "Global content distribution")
        System_Ext(email_service, "Email Service", "Transactional email delivery")
        System_Ext(sms_service, "SMS Service", "SMS notification delivery")
    }

    %% Primary user interactions
    Rel(content_consumer, medianest, "Browses and discovers content", "HTTPS")
    Rel(media_requester, medianest, "Submits media requests", "HTTPS")
    Rel(system_admin, medianest, "Configures and monitors", "HTTPS Admin Panel")
    Rel(system_admin, monitoring, "Views metrics and alerts", "HTTPS")
    Rel(developer, medianest, "Deploys and maintains", "CI/CD")

    %% MediaNest to Media Ecosystem
    Rel(medianest, plex_server, "Manages libraries and collections", "REST API, OAuth")
    Rel(medianest, overseerr, "Submits and tracks requests", "REST API, Webhooks")
    Rel(overseerr, sonarr, "Manages TV downloads", "REST API")
    Rel(overseerr, radarr, "Manages movie downloads", "REST API")

    %% Content source integrations
    Rel(medianest, tmdb, "Fetches metadata and artwork", "REST API")
    Rel(medianest, youtube, "Downloads playlists and videos", "API")
    Rel(sonarr, torrents, "Downloads TV content", "Various protocols")
    Rel(radarr, torrents, "Downloads movie content", "Various protocols")

    %% Infrastructure dependencies
    Rel(medianest, cloud_provider, "Hosted on", "Infrastructure")
    Rel(medianest, cdn, "Serves static content via", "HTTP/2")
    Rel(medianest, email_service, "Sends notifications via", "SMTP/API")
    Rel(medianest, sms_service, "Sends alerts via", "REST API")

    %% System to system relationships
    Rel(medianest, monitoring, "Sends metrics and logs to", "Prometheus/Grafana")
    Rel(medianest, backup, "Backed up by", "Automated backup")
    Rel(plex_server, medianest, "Sends webhook events to", "HTTP Webhooks")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")</code></pre><h2 id="level-2-container-diagram">Level 2: Container Diagram<a class="headerlink" href="#level-2-container-diagram" title="Permanent link">&para;</a></h2><h3 id="medianest-container-architecture">MediaNest Container Architecture<a class="headerlink" href="#medianest-container-architecture" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>C4Container
    title MediaNest Platform - Container Architecture

    Person(user, "Platform User", "Interacts with MediaNest for media management")

    System_Boundary(medianest_platform, "MediaNest Platform") {
        Container(spa, "Single Page Application", "React, Next.js, TypeScript", "Provides media management interface and real-time updates")
        Container(mobile_app, "Mobile Application", "React Native, TypeScript", "Mobile access to MediaNest features")
        Container(api_gateway, "API Gateway", "Kong/Istio Service Mesh", "API routing, authentication, rate limiting, and security")

        Container(web_server, "Web Server", "Nginx", "Serves static content, SSL termination, load balancing")
        Container(api_server, "API Application", "Express.js, Node.js, TypeScript", "Handles business logic, integrations, and data processing")
        Container(websocket_server, "WebSocket Server", "Socket.IO", "Real-time communication and notifications")
        Container(background_workers, "Background Workers", "Node.js, Bull Queue", "Asynchronous job processing for downloads and integrations")

        ContainerDb(primary_db, "Primary Database", "PostgreSQL 15", "Stores user data, media requests, system configuration")
        ContainerDb(cache_db, "Cache Database", "Redis 7", "Session storage, caching, pub/sub messaging")
        ContainerDb(search_db, "Search Database", "Elasticsearch", "Full-text search for media content")
        ContainerDb(time_series_db, "Metrics Database", "InfluxDB", "Performance metrics and monitoring data")

        Container(file_storage, "File Storage", "MinIO/S3", "Stores downloaded media files, thumbnails, logs")
        Container(backup_service, "Backup Service", "PostgreSQL Backup, Redis AOF", "Automated database backups and point-in-time recovery")
    }

    System_Boundary(monitoring_observability, "Monitoring &amp; Observability") {
        Container(metrics_collector, "Metrics Collector", "Prometheus", "Collects and stores system metrics")
        Container(dashboard, "Monitoring Dashboard", "Grafana", "Visualizes metrics and system health")
        Container(log_aggregator, "Log Aggregator", "ELK Stack", "Centralizes and analyzes application logs")
        Container(error_tracker, "Error Tracking", "Sentry", "Captures and tracks application errors")
        Container(uptime_monitor, "Uptime Monitor", "Uptime Kuma", "External service monitoring and alerts")
        Container(apm, "Application Performance Monitoring", "New Relic/DataDog", "Deep application performance insights")
    }

    System_Ext(plex_server, "Plex Media Server", "Personal media server")
    System_Ext(overseerr, "Overseerr", "Media request automation")
    System_Ext(tmdb_api, "TMDB API", "Movie/TV metadata")
    System_Ext(youtube_api, "YouTube API", "Video platform integration")
    System_Ext(email_service, "Email Service", "Transactional emails")

    %% User interactions
    Rel(user, web_server, "Uses", "HTTPS")
    Rel(user, mobile_app, "Uses", "Mobile App")

    %% Web tier
    Rel(web_server, spa, "Serves", "HTTPS")
    Rel(web_server, api_gateway, "Proxies API requests to", "HTTP")
    Rel(spa, api_gateway, "Makes API calls to", "HTTPS/REST")
    Rel(spa, websocket_server, "Connects to", "WebSocket/WSS")
    Rel(mobile_app, api_gateway, "Makes API calls to", "HTTPS/REST")

    %% API tier
    Rel(api_gateway, api_server, "Routes requests to", "HTTP/gRPC")
    Rel(api_server, websocket_server, "Triggers notifications via", "Internal API")
    Rel(api_server, background_workers, "Queues jobs to", "Redis Queue")

    %% Data tier
    Rel(api_server, primary_db, "Reads/Writes", "PostgreSQL Protocol")
    Rel(api_server, cache_db, "Caches/Sessions", "Redis Protocol")
    Rel(api_server, search_db, "Searches", "REST API")
    Rel(background_workers, primary_db, "Updates job status", "PostgreSQL Protocol")
    Rel(background_workers, file_storage, "Stores files", "S3 API")
    Rel(websocket_server, cache_db, "Pub/Sub", "Redis Protocol")

    %% External integrations
    Rel(api_server, plex_server, "Manages libraries", "REST API")
    Rel(api_server, overseerr, "Submits requests", "REST API")
    Rel(api_server, tmdb_api, "Fetches metadata", "REST API")
    Rel(background_workers, youtube_api, "Downloads content", "API")
    Rel(api_server, email_service, "Sends notifications", "SMTP/API")

    %% Monitoring
    Rel(api_server, metrics_collector, "Sends metrics", "HTTP")
    Rel(background_workers, metrics_collector, "Sends metrics", "HTTP")
    Rel(websocket_server, log_aggregator, "Sends logs", "HTTP")
    Rel(api_server, error_tracker, "Reports errors", "HTTP")
    Rel(metrics_collector, dashboard, "Provides data", "PromQL")
    Rel(metrics_collector, time_series_db, "Stores metrics", "InfluxDB Protocol")
    Rel(uptime_monitor, api_server, "Health checks", "HTTP")

    %% Backup
    Rel(backup_service, primary_db, "Backs up", "pg_dump")
    Rel(backup_service, cache_db, "Backs up", "Redis AOF")
    Rel(backup_service, file_storage, "Backs up", "S3 Sync")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")</code></pre><h2 id="level-3-component-diagram-api-application">Level 3: Component Diagram - API Application<a class="headerlink" href="#level-3-component-diagram-api-application" title="Permanent link">&para;</a></h2><h3 id="api-application-internal-architecture">API Application Internal Architecture<a class="headerlink" href="#api-application-internal-architecture" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>C4Component
    title MediaNest API Application - Component Architecture

    Container(spa, "Web Application", "React/Next.js", "User interface")
    Container(mobile_app, "Mobile App", "React Native", "Mobile interface")
    Container(websocket_server, "WebSocket Server", "Socket.IO", "Real-time communication")

    Container_Boundary(api_application, "API Application") {
        Component(api_gateway_internal, "Internal API Gateway", "Express Gateway", "Request routing and middleware orchestration")

        Component(auth_controller, "Authentication Controller", "Express Controller", "Handles login, logout, token management")
        Component(media_controller, "Media Controller", "Express Controller", "Media request lifecycle management")
        Component(plex_controller, "Plex Controller", "Express Controller", "Plex server integration endpoints")
        Component(dashboard_controller, "Dashboard Controller", "Express Controller", "System statistics and user dashboards")
        Component(admin_controller, "Admin Controller", "Express Controller", "Administrative functions and system configuration")
        Component(youtube_controller, "YouTube Controller", "Express Controller", "YouTube download management")
        Component(health_controller, "Health Controller", "Express Controller", "System health checks and status")
        Component(webhook_controller, "Webhook Controller", "Express Controller", "External webhook processing")

        Component(auth_service, "Authentication Service", "Service Class", "JWT tokens, OAuth flows, session management")
        Component(media_service, "Media Service", "Service Class", "Media request workflow and business logic")
        Component(plex_service, "Plex Service", "Service Class", "Plex API integration and library management")
        Component(cache_service, "Cache Service", "Service Class", "Multi-tier caching and invalidation")
        Component(notification_service, "Notification Service", "Service Class", "Multi-channel notification delivery")
        Component(search_service, "Search Service", "Service Class", "Full-text search and indexing")
        Component(youtube_service, "YouTube Service", "Service Class", "YouTube API integration and downloads")
        Component(health_service, "Health Service", "Service Class", "System monitoring and diagnostics")
        Component(audit_service, "Audit Service", "Service Class", "Activity logging and compliance")
        Component(integration_service, "Integration Service", "Service Class", "External API coordination")

        Component(user_repository, "User Repository", "Repository Class", "User data access and management")
        Component(media_repository, "Media Repository", "Repository Class", "Media request data operations")
        Component(youtube_repository, "YouTube Repository", "Repository Class", "Download job data management")
        Component(service_repository, "Service Repository", "Repository Class", "Service status and configuration")
        Component(notification_repository, "Notification Repository", "Repository Class", "Notification history and preferences")
        Component(audit_repository, "Audit Repository", "Repository Class", "System audit and compliance logs")
        Component(cache_repository, "Cache Repository", "Repository Class", "Cache operations and management")

        Component(middleware_stack, "Middleware Stack", "Express Middleware", "Cross-cutting concerns pipeline")
        Component(validation_middleware, "Validation Middleware", "Joi/Zod Schemas", "Request/response validation")
        Component(auth_middleware, "Authentication Middleware", "JWT Middleware", "Token validation and user context")
        Component(rate_limit_middleware, "Rate Limiting Middleware", "Express Rate Limit", "API usage throttling")
        Component(security_middleware, "Security Middleware", "Helmet.js", "Security headers and protection")
        Component(logging_middleware, "Logging Middleware", "Winston/Pino", "Request/response logging")
        Component(error_middleware, "Error Handling Middleware", "Express Error Handler", "Centralized error processing")

        Component(event_bus, "Internal Event Bus", "EventEmitter/Bull", "Inter-component communication")
        Component(job_scheduler, "Job Scheduler", "Bull Queue", "Background job management")
        Component(circuit_breaker, "Circuit Breaker", "Opossum", "External service failure protection")
    }

    ContainerDb(postgres, "PostgreSQL", "Primary database")
    ContainerDb(redis, "Redis", "Cache and sessions")
    ContainerDb(elasticsearch, "Elasticsearch", "Search index")

    System_Ext(plex_server, "Plex Media Server", "Media server")
    System_Ext(overseerr, "Overseerr", "Request automation")
    System_Ext(tmdb, "TMDB API", "Metadata service")
    System_Ext(youtube, "YouTube API", "Video platform")

    %% External requests
    Rel(spa, api_gateway_internal, "Makes API calls", "HTTPS/REST")
    Rel(mobile_app, api_gateway_internal, "Makes API calls", "HTTPS/REST")

    %% Middleware pipeline
    Rel(api_gateway_internal, middleware_stack, "Processes requests through")
    Rel(middleware_stack, security_middleware, "Security processing")
    Rel(middleware_stack, rate_limit_middleware, "Rate limiting")
    Rel(middleware_stack, auth_middleware, "Authentication")
    Rel(middleware_stack, validation_middleware, "Validation")
    Rel(middleware_stack, logging_middleware, "Logging")

    %% Controller routing
    Rel(middleware_stack, auth_controller, "Routes auth requests")
    Rel(middleware_stack, media_controller, "Routes media requests")
    Rel(middleware_stack, plex_controller, "Routes Plex requests")
    Rel(middleware_stack, dashboard_controller, "Routes dashboard requests")
    Rel(middleware_stack, admin_controller, "Routes admin requests")
    Rel(middleware_stack, youtube_controller, "Routes YouTube requests")
    Rel(middleware_stack, health_controller, "Routes health requests")
    Rel(middleware_stack, webhook_controller, "Routes webhook requests")

    %% Controller to service
    Rel(auth_controller, auth_service, "Uses")
    Rel(media_controller, media_service, "Uses")
    Rel(plex_controller, plex_service, "Uses")
    Rel(dashboard_controller, cache_service, "Uses")
    Rel(dashboard_controller, search_service, "Uses")
    Rel(admin_controller, health_service, "Uses")
    Rel(admin_controller, audit_service, "Uses")
    Rel(youtube_controller, youtube_service, "Uses")
    Rel(health_controller, health_service, "Uses")
    Rel(webhook_controller, integration_service, "Uses")

    %% Service to repository
    Rel(auth_service, user_repository, "Uses")
    Rel(auth_service, cache_repository, "Uses")
    Rel(media_service, media_repository, "Uses")
    Rel(media_service, user_repository, "Uses")
    Rel(plex_service, service_repository, "Uses")
    Rel(youtube_service, youtube_repository, "Uses")
    Rel(notification_service, notification_repository, "Uses")
    Rel(audit_service, audit_repository, "Uses")
    Rel(search_service, cache_repository, "Uses")
    Rel(health_service, service_repository, "Uses")

    %% Repository to database
    Rel(user_repository, postgres, "Queries", "SQL")
    Rel(media_repository, postgres, "Queries", "SQL")
    Rel(youtube_repository, postgres, "Queries", "SQL")
    Rel(service_repository, postgres, "Queries", "SQL")
    Rel(notification_repository, postgres, "Queries", "SQL")
    Rel(audit_repository, postgres, "Queries", "SQL")
    Rel(cache_repository, redis, "Operations", "Redis Protocol")

    %% Search integration
    Rel(search_service, elasticsearch, "Searches", "REST API")
    Rel(media_service, search_service, "Indexes content")

    %% Event and job processing
    Rel(media_service, event_bus, "Publishes events")
    Rel(youtube_service, job_scheduler, "Queues jobs")
    Rel(notification_service, event_bus, "Subscribes to events")
    Rel(event_bus, websocket_server, "Triggers notifications")

    %% External service integration
    Rel(plex_service, circuit_breaker, "Protected calls")
    Rel(circuit_breaker, plex_server, "API calls", "REST API")
    Rel(integration_service, overseerr, "API calls", "REST API")
    Rel(media_service, tmdb, "Metadata requests", "REST API")
    Rel(youtube_service, youtube, "Video operations", "API")

    %% Error handling
    Rel(auth_controller, error_middleware, "Error propagation")
    Rel(media_controller, error_middleware, "Error propagation")
    Rel(plex_controller, error_middleware, "Error propagation")
    Rel(dashboard_controller, error_middleware, "Error propagation")
    Rel(admin_controller, error_middleware, "Error propagation")
    Rel(youtube_controller, error_middleware, "Error propagation")

    UpdateLayoutConfig($c4ShapeInRow="4", $c4BoundaryInRow="1")</code></pre><h2 id="level-4-code-diagram-authentication-service">Level 4: Code Diagram - Authentication Service<a class="headerlink" href="#level-4-code-diagram-authentication-service" title="Permanent link">&para;</a></h2><h3 id="authentication-service-internal-structure">Authentication Service Internal Structure<a class="headerlink" href="#authentication-service-internal-structure" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>C4Component
    title Authentication Service - Detailed Code Architecture

    Container_Boundary(auth_service_detail, "Authentication Service") {
        Component(auth_facade, "AuthenticationFacade", "Service Facade", "Main authentication orchestration")

        Component(jwt_service, "JWTService", "Token Service", "JWT token generation, validation, and rotation")
        Component(oauth_service, "OAuthService", "OAuth Provider", "Plex OAuth integration and token exchange")
        Component(session_service, "SessionService", "Session Manager", "User session lifecycle management")
        Component(password_service, "PasswordService", "Password Manager", "Password hashing, validation, and reset")
        Component(device_service, "DeviceService", "Device Manager", "Device registration and fingerprinting")
        Component(rate_limiter, "RateLimiterService", "Rate Limiter", "Authentication attempt rate limiting")
        Component(audit_logger, "AuditLogger", "Security Auditor", "Authentication event logging")

        Component(token_validator, "TokenValidator", "Validator", "JWT signature and expiration validation")
        Component(credential_validator, "CredentialValidator", "Validator", "User credential validation")
        Component(device_fingerprinter, "DeviceFingerprinter", "Security Component", "Browser/device fingerprinting")
        Component(session_analyzer, "SessionAnalyzer", "Analytics", "Session behavior analysis")

        Component(auth_repository, "AuthRepository", "Data Access", "Authentication data operations")
        Component(session_repository, "SessionRepository", "Data Access", "Session data persistence")
        Component(device_repository, "DeviceRepository", "Data Access", "Device registration data")
        Component(rate_limit_repository, "RateLimitRepository", "Data Access", "Rate limiting data")

        Component(auth_cache, "AuthCache", "Cache Layer", "Authentication data caching")
        Component(session_cache, "SessionCache", "Cache Layer", "Active session caching")
        Component(token_blacklist, "TokenBlacklist", "Security Cache", "Revoked token management")
    }

    ContainerDb(postgres_users, "User Database", "PostgreSQL", "User accounts and credentials")
    ContainerDb(redis_auth, "Auth Cache", "Redis", "Sessions and temporary auth data")

    System_Ext(plex_oauth, "Plex OAuth Provider", "External OAuth service")
    Container(notification_service, "Notification Service", "Internal service", "User notifications")
    Container(audit_service, "Audit Service", "Internal service", "System audit logging")

    %% Main facade coordination
    Rel(auth_facade, jwt_service, "Manages tokens")
    Rel(auth_facade, oauth_service, "OAuth flows")
    Rel(auth_facade, session_service, "Session management")
    Rel(auth_facade, password_service, "Password operations")
    Rel(auth_facade, device_service, "Device tracking")
    Rel(auth_facade, rate_limiter, "Rate limiting")
    Rel(auth_facade, audit_logger, "Security logging")

    %% Service internal dependencies
    Rel(jwt_service, token_validator, "Token validation")
    Rel(jwt_service, token_blacklist, "Revocation check")
    Rel(oauth_service, credential_validator, "Credential validation")
    Rel(session_service, device_fingerprinter, "Device identification")
    Rel(session_service, session_analyzer, "Behavior analysis")
    Rel(device_service, device_fingerprinter, "Fingerprint generation")

    %% Repository layer
    Rel(jwt_service, auth_repository, "Token storage")
    Rel(session_service, session_repository, "Session persistence")
    Rel(device_service, device_repository, "Device data")
    Rel(rate_limiter, rate_limit_repository, "Rate limit data")

    %% Cache layer
    Rel(jwt_service, auth_cache, "Token caching")
    Rel(session_service, session_cache, "Session caching")
    Rel(token_validator, token_blacklist, "Blacklist check")
    Rel(rate_limiter, auth_cache, "Rate limit caching")

    %% Data persistence
    Rel(auth_repository, postgres_users, "User queries", "SQL")
    Rel(session_repository, postgres_users, "Session storage", "SQL")
    Rel(device_repository, postgres_users, "Device data", "SQL")
    Rel(rate_limit_repository, postgres_users, "Rate limits", "SQL")

    %% Cache operations
    Rel(auth_cache, redis_auth, "Cache operations", "Redis")
    Rel(session_cache, redis_auth, "Session cache", "Redis")
    Rel(token_blacklist, redis_auth, "Blacklist storage", "Redis")

    %% External integrations
    Rel(oauth_service, plex_oauth, "OAuth flow", "OAuth 2.0")
    Rel(audit_logger, audit_service, "Audit events", "Internal API")
    Rel(session_service, notification_service, "Session alerts", "Internal API")

    %% Security flows
    Rel(credential_validator, password_service, "Password verification")
    Rel(session_analyzer, audit_logger, "Suspicious activity")
    Rel(device_fingerprinter, session_analyzer, "Device behavior")
    Rel(token_validator, session_service, "Token session link")

    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")</code></pre><h2 id="deployment-architecture-diagram">Deployment Architecture Diagram<a class="headerlink" href="#deployment-architecture-diagram" title="Permanent link">&para;</a></h2><h3 id="production-deployment-view">Production Deployment View<a class="headerlink" href="#production-deployment-view" title="Permanent link">&para;</a></h3><pre class="mermaid"><code>C4Deployment
    title MediaNest Production Deployment Architecture

    Deployment_Node(user_devices, "User Devices", "Various platforms") {
        Container(web_browser, "Web Browser", "Chrome, Firefox, Safari", "User interface access")
        Container(mobile_app, "Mobile App", "iOS/Android", "Native mobile access")
    }

    Deployment_Node(cdn, "Content Delivery Network", "CloudFlare/AWS CloudFront") {
        Container(edge_cache, "Edge Cache", "Static content cache", "Global content distribution")
        Container(ddos_protection, "DDoS Protection", "Traffic filtering", "Attack mitigation")
    }

    Deployment_Node(load_balancer, "Load Balancer", "AWS ALB/NGINX Plus") {
        Container(ssl_termination, "SSL Termination", "TLS 1.3 endpoints", "Certificate management")
        Container(traffic_router, "Traffic Router", "Intelligent routing", "Request distribution")
    }

    Deployment_Node(kubernetes_cluster, "Kubernetes Cluster", "AWS EKS/GKE") {
        Deployment_Node(web_tier, "Web Tier Pods", "NGINX containers") {
            Container(nginx_pod1, "NGINX Pod 1", "Static serving", "Web server instance")
            Container(nginx_pod2, "NGINX Pod 2", "Static serving", "Web server instance")
        }

        Deployment_Node(api_tier, "API Tier Pods", "Node.js containers") {
            Container(api_pod1, "API Pod 1", "Express.js application", "Business logic instance")
            Container(api_pod2, "API Pod 2", "Express.js application", "Business logic instance")
            Container(api_pod3, "API Pod 3", "Express.js application", "Business logic instance")
        }

        Deployment_Node(worker_tier, "Worker Tier Pods", "Background processing") {
            Container(worker_pod1, "Worker Pod 1", "Download processor", "Background job worker")
            Container(worker_pod2, "Worker Pod 2", "Media processor", "Background job worker")
        }

        Deployment_Node(websocket_tier, "WebSocket Tier", "Real-time communication") {
            Container(ws_pod1, "WebSocket Pod 1", "Socket.IO server", "Real-time notifications")
            Container(ws_pod2, "WebSocket Pod 2", "Socket.IO server", "Real-time notifications")
        }
    }

    Deployment_Node(database_tier, "Database Tier", "Managed database services") {
        Deployment_Node(postgres_cluster, "PostgreSQL Cluster", "AWS RDS/Google Cloud SQL") {
            ContainerDb(postgres_primary, "PostgreSQL Primary", "Write operations", "Main database")
            ContainerDb(postgres_replica1, "PostgreSQL Replica 1", "Read operations", "Read replica")
            ContainerDb(postgres_replica2, "PostgreSQL Replica 2", "Read operations", "Read replica")
        }

        Deployment_Node(redis_cluster, "Redis Cluster", "ElastiCache/MemoryStore") {
            ContainerDb(redis_master, "Redis Master", "Write operations", "Cache master")
            ContainerDb(redis_slave1, "Redis Slave 1", "Read operations", "Cache replica")
            ContainerDb(redis_slave2, "Redis Slave 2", "Read operations", "Cache replica")
        }

        Deployment_Node(search_cluster, "Elasticsearch Cluster", "Managed search service") {
            ContainerDb(es_master, "ES Master Node", "Cluster coordination", "Search master")
            ContainerDb(es_data1, "ES Data Node 1", "Data storage/search", "Search node")
            ContainerDb(es_data2, "ES Data Node 2", "Data storage/search", "Search node")
        }
    }

    Deployment_Node(storage_tier, "Storage Tier", "Object storage") {
        Container(file_storage, "Object Storage", "AWS S3/GCS", "Media file storage")
        Container(backup_storage, "Backup Storage", "Glacier/Coldline", "Long-term backups")
        Container(log_storage, "Log Storage", "S3/GCS", "Application logs")
    }

    Deployment_Node(monitoring_tier, "Monitoring Infrastructure", "Observability stack") {
        Container(prometheus, "Prometheus", "Metrics collection", "Time-series database")
        Container(grafana, "Grafana", "Metrics visualization", "Monitoring dashboards")
        Container(elk_stack, "ELK Stack", "Log aggregation", "Log analysis platform")
        Container(jaeger, "Jaeger", "Distributed tracing", "Request tracing")
    }

    Deployment_Node(external_services, "External Services", "Third-party integrations") {
        System_Ext(plex_server, "Plex Media Server", "Self-hosted media server")
        System_Ext(overseerr, "Overseerr", "Media request automation")
        System_Ext(tmdb_api, "TMDB API", "Movie/TV metadata")
        System_Ext(youtube_api, "YouTube API", "Video platform")
    }

    %% User traffic flow
    Rel(web_browser, edge_cache, "HTTPS requests", "443")
    Rel(mobile_app, edge_cache, "HTTPS requests", "443")

    %% CDN to load balancer
    Rel(edge_cache, ssl_termination, "HTTPS", "443")
    Rel(ddos_protection, traffic_router, "Filtered traffic", "80/443")

    %% Load balancer to Kubernetes
    Rel(traffic_router, nginx_pod1, "HTTP", "80")
    Rel(traffic_router, nginx_pod2, "HTTP", "80")
    Rel(ssl_termination, api_pod1, "HTTP", "8080")
    Rel(ssl_termination, api_pod2, "HTTP", "8080")
    Rel(ssl_termination, api_pod3, "HTTP", "8080")

    %% WebSocket connections
    Rel(web_browser, ws_pod1, "WebSocket", "3000")
    Rel(mobile_app, ws_pod2, "WebSocket", "3000")

    %% API to databases
    Rel(api_pod1, postgres_primary, "SQL", "5432")
    Rel(api_pod2, postgres_replica1, "SQL", "5432")
    Rel(api_pod3, postgres_replica2, "SQL", "5432")

    Rel(api_pod1, redis_master, "Redis", "6379")
    Rel(api_pod2, redis_slave1, "Redis", "6379")
    Rel(api_pod3, redis_slave2, "Redis", "6379")

    Rel(api_pod1, es_data1, "HTTP", "9200")
    Rel(api_pod2, es_data2, "HTTP", "9200")

    %% Workers to external services
    Rel(worker_pod1, file_storage, "S3 API", "HTTPS")
    Rel(worker_pod2, file_storage, "S3 API", "HTTPS")
    Rel(api_pod1, plex_server, "REST API", "32400")
    Rel(api_pod2, overseerr, "REST API", "5055")
    Rel(api_pod3, tmdb_api, "REST API", "HTTPS")
    Rel(worker_pod1, youtube_api, "API", "HTTPS")

    %% Monitoring connections
    Rel(api_pod1, prometheus, "Metrics", "9090")
    Rel(api_pod2, prometheus, "Metrics", "9090")
    Rel(api_pod3, prometheus, "Metrics", "9090")
    Rel(prometheus, grafana, "PromQL", "3000")

    %% Database replication
    Rel(postgres_primary, postgres_replica1, "Streaming replication", "5432")
    Rel(postgres_primary, postgres_replica2, "Streaming replication", "5432")
    Rel(redis_master, redis_slave1, "Replication", "6379")
    Rel(redis_master, redis_slave2, "Replication", "6379")

    %% Backup flows
    Rel(postgres_primary, backup_storage, "Automated backups", "HTTPS")
    Rel(file_storage, backup_storage, "Cross-region replication", "HTTPS")

    UpdateLayoutConfig($c4ShapeInRow="2", $c4BoundaryInRow="1")</code></pre><p>These C4 model diagrams provide a comprehensive view of MediaNest's architecture at multiple levels of detail, from the high-level system context down to individual service components. The diagrams follow C4 modeling best practices and are optimized for MKDocs Material rendering with interactive features.</p><aside class="md-source-file"><span class="md-source-file__fact"><span class="md-icon" title="Last update"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="September 12, 2025 20:05:39 UTC"><span class="timeago" datetime="2025-09-12T20:05:39+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="September 12, 2025 20:05:39 UTC">2025-09-12</span></span><span class="md-source-file__fact"><span class="md-icon" title="Created"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="September 11, 2025 20:45:11 UTC"><span class="timeago" datetime="2025-09-11T20:45:11+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="September 11, 2025 20:45:11 UTC">2025-09-11</span></span></aside><form class="md-feedback" name="feedback" hidden><fieldset><legend class="md-feedback__title"> Was this page helpful? </legend><div class="md-feedback__inner"><div class="md-feedback__list"><button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg></button><button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg></button></div><div class="md-feedback__note"><div data-md-value="1" hidden> Thanks for your feedback! Consider starring us on <a href="https://github.com/kinginyellow/medianest" target="_blank" rel="noopener">GitHub</a> and sharing with the community. </div><div data-md-value="0" hidden> Thanks for your feedback! Help us improve by <a href="https://github.com/kinginyellow/medianest/issues/new/?title=[Docs]+MediaNest%20C4%20Architecture%20Diagrams+-+/visuals/c4-architecture-diagrams/" target="_blank" rel="noopener">creating an issue</a> or <a href="https://github.com/kinginyellow/medianest/edit/develop/docs/{path}" target="_blank" rel="noopener">editing this page</a>. </div></div></div></fieldset></form></article></div><script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type="button" class="md-top md-icon" data-md-component="top" hidden><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button></main><footer class="md-footer"><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class="md-copyright"><div class="md-copyright__highlight"> Copyright &copy; 2024 MediaNest Development Team - <a href="#__consent">Manage Cookies</a> | <a href="/privacy">Privacy Policy</a> | <a href="/terms">Terms of Service</a></div></div><div class="md-social"><a href="https://github.com/kinginyellow/medianest" target="_blank" rel="noopener" title="GitHub Repository" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></a><a href="https://hub.docker.com/r/medianest/medianest" target="_blank" rel="noopener" title="Docker Hub" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 640 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg></a><a href="https://discord.gg/medianest" target="_blank" rel="noopener" title="Discord Community" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg></a><a href="https://twitter.com/medianest" target="_blank" rel="noopener" title="Twitter Updates" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg></a><a href="https://medianest.com" target="_blank" rel="noopener" title="Official Website" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg></a><a href="https://kinginyellow.github.io/medianest/" target="_blank" rel="noopener" title="Documentation" class="md-social__link"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M384 512H96c-53 0-96-43-96-96V96C0 43 43 0 96 0h304c26.5 0 48 21.5 48 48v288c0 20.9-13.4 38.7-32 45.3V448c17.7 0 32 14.3 32 32s-14.3 32-32 32zM96 384c-17.7 0-32 14.3-32 32s14.3 32 32 32h256v-64zm32-232c0 13.3 10.7 24 24 24h176c13.3 0 24-10.7 24-24s-10.7-24-24-24H152c-13.3 0-24 10.7-24 24m24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24h176c13.3 0 24-10.7 24-24s-10.7-24-24-24z"/></svg></a></div></div></div></footer></div><div class="md-dialog" data-md-component="dialog"><div class="md-dialog__inner md-typeset"></div></div><div class="md-progress" data-md-component="progress" role="progressbar"></div><div class="md-consent" data-md-component="consent" id="__consent" hidden><div class="md-consent__overlay"></div><aside class="md-consent__inner"><form class="md-consent__form md-grid md-typeset" name="consent"><h4>Cookie consent</h4><p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p><input class="md-toggle" type="checkbox" id="__settings"><div class="md-consent__settings"><ul class="task-list"><li class="task-list-item"><label class="task-list-control"><input type="checkbox" name="analytics"><span class="task-list-indicator"></span> Google Analytics </label></li><li class="task-list-item"><label class="task-list-control"><input type="checkbox" name="github"><span class="task-list-indicator"></span> GitHub </label></li></ul></div><div class="md-consent__controls"><button class="md-button md-button--primary">Accept</button><button type="reset" class="md-button md-button--primary">Reject</button><label class="md-button" for="__settings">Manage settings</label></div></form></aside></div><script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script><script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": {"API": "api", "Configuration": "config", "Docker": "docker", "Performance": "performance", "Reference": "reference", "Security": "security", "Setup": "setup", "Tutorial": "tutorial"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script><script src="../../assets/javascripts/bundle.92b07e13.min.js"></script><script src="../../js/timeago.min.js"></script><script src="../../js/timeago_mkdocs_material.js"></script><script src="../../javascripts/extra.js"></script><script src="../../javascripts/medianest.js"></script><script src="../../javascripts/search-enhancements.js"></script><script src="../../javascripts/api-explorer.js"></script><script src="../../javascripts/mermaid-config.js"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script><script src="https://unpkg.com/swagger-ui-dist@4.15.5/swagger-ui-bundle.js"></script></body></html>