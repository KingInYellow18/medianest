# MediaNest Test Environment Configuration
# Copy this file to .env.test for running tests
# Test configuration uses different ports and databases to avoid conflicts

# =============================================================================
# TEST ENVIRONMENT
# =============================================================================
NODE_ENV=test
LOG_LEVEL=error

# =============================================================================
# TEST SERVER CONFIGURATION
# =============================================================================
PORT=4001
TEST_PORT=4001
HOST=localhost
FRONTEND_URL=http://localhost:3001
BACKEND_URL=http://localhost:4001
API_PREFIX=/api
API_VERSION=v1

# =============================================================================
# TEST DATABASE CONFIGURATION
# =============================================================================
# Use a separate test database
DATABASE_URL=postgresql://medianest:medianest_password@localhost:5433/medianest_test
TEST_DATABASE_URL=postgresql://medianest:medianest_password@localhost:5433/medianest_test
DATABASE_POOL_SIZE=10
DATABASE_TIMEOUT=10000

# =============================================================================
# TEST REDIS CONFIGURATION
# =============================================================================
# Use a separate Redis database for tests
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_DATABASE=1
REDIS_TLS=false
TEST_REDIS_URL=redis://localhost:6380/1

# =============================================================================
# TEST AUTHENTICATION & SECURITY
# =============================================================================
NEXTAUTH_URL=http://localhost:3001
NEXTAUTH_SECRET=test-secret-32-characters-long!!
JWT_SECRET=test-jwt-secret-32-characters-long!!
JWT_ISSUER=medianest-test
JWT_AUDIENCE=medianest-test-api
JWT_EXPIRES_IN=1h
ENCRYPTION_KEY=***REMOVED***!

# =============================================================================
# TEST PLEX CONFIGURATION
# =============================================================================
PLEX_CLIENT_ID=MediaNestTest
PLEX_CLIENT_SECRET=test-plex-secret
PLEX_CLIENT_IDENTIFIER=MediaNestTest

# =============================================================================
# TEST RATE LIMITING (More Permissive)
# =============================================================================
RATE_LIMIT_API_REQUESTS=1000
RATE_LIMIT_API_WINDOW=60
RATE_LIMIT_YOUTUBE_REQUESTS=100
RATE_LIMIT_YOUTUBE_WINDOW=3600
RATE_LIMIT_MEDIA_REQUESTS=100
RATE_LIMIT_MEDIA_WINDOW=3600

# =============================================================================
# TEST YOUTUBE CONFIGURATION
# =============================================================================
YOUTUBE_DOWNLOAD_PATH=/tmp/medianest-test/youtube
YOUTUBE_MAX_CONCURRENT_DOWNLOADS=1
YOUTUBE_RATE_LIMIT=100

# =============================================================================
# TEST ADMIN CONFIGURATION
# =============================================================================
ADMIN_USERNAME=testadmin
ADMIN_PASSWORD=testpassword

# =============================================================================
# TEST FRONTEND CONFIGURATION
# =============================================================================
NEXT_PUBLIC_API_URL=http://localhost:4001/api
NEXT_PUBLIC_BACKEND_URL=http://localhost:4001
NEXT_PUBLIC_WS_URL=ws://localhost:4001
NEXT_PUBLIC_APP_NAME=MediaNest Test
NEXT_PUBLIC_APP_VERSION=1.0.0-test

# =============================================================================
# TEST MONITORING
# =============================================================================
HEALTH_CHECK_INTERVAL=5000
TEST_TIMEOUT=30000

# =============================================================================
# DOCKER SECRETS (DISABLED FOR TESTS)
# =============================================================================
USE_DOCKER_SECRETS=false