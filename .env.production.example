# MediaNest Production Environment Configuration
# Copy this file to .env.production and update with your values

# Application
NODE_ENV=production
USE_DOCKER_SECRETS=true
DOCKER_SECRETS_PATH=/run/secrets

# Server Configuration
PORT=4000
HOST=0.0.0.0
DOMAIN_NAME=media.yourdomain.com

# URLs (update with your domain)
FRONTEND_URL=https://media.yourdomain.com
BACKEND_URL=https://media.yourdomain.com
NEXTAUTH_URL=https://media.yourdomain.com

# API Configuration
API_PREFIX=/api
API_VERSION=v1

# JWT Configuration
JWT_ISSUER=medianest
JWT_AUDIENCE=medianest-api
JWT_EXPIRES_IN=7d

# Session Configuration
SESSION_NAME=medianest.sid
SESSION_MAX_AGE=604800000
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# CORS Configuration
CORS_ORIGIN=https://media.yourdomain.com
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_API_REQUESTS=100
RATE_LIMIT_API_WINDOW=60
RATE_LIMIT_YOUTUBE_REQUESTS=5
RATE_LIMIT_YOUTUBE_WINDOW=3600
RATE_LIMIT_MEDIA_REQUESTS=20
RATE_LIMIT_MEDIA_WINDOW=3600
RATE_LIMIT_AUTH_REQUESTS=5
RATE_LIMIT_AUTH_WINDOW=900

# YouTube Configuration
YOUTUBE_DOWNLOAD_PATH=/app/youtube
YOUTUBE_MAX_CONCURRENT_DOWNLOADS=3
YOUTUBE_MAX_FILE_SIZE=5368709120
YOUTUBE_ALLOWED_FORMATS=mp4,webm,mkv
YOUTUBE_DEFAULT_QUALITY=1080p
YOUTUBE_RATE_LIMIT=5

# Plex Configuration
PLEX_TIMEOUT=30000
PLEX_MAX_RETRIES=3

# External Services
OVERSEERR_TIMEOUT=10000
UPTIME_KUMA_TIMEOUT=5000
SERVICE_STATUS_CACHE_TTL=300

# Queue Configuration
QUEUE_REDIS_MAX_RETRIES=3
QUEUE_DEFAULT_REMOVE_ON_COMPLETE=100
QUEUE_DEFAULT_REMOVE_ON_FAIL=500

# Logging
LOG_LEVEL=info
LOG_MAX_FILES=14
LOG_MAX_SIZE=50m
LOG_COMPRESS=true
ENABLE_ACCESS_LOGS=true
ENABLE_ERROR_LOGS=true
ENABLE_SQL_LOGS=false

# Monitoring
HEALTH_CHECK_INTERVAL=30000
METRICS_ENABLED=true
METRICS_PORT=9090

# Security
HELMET_ENABLED=true
TRUST_PROXY=true
BCRYPT_ROUNDS=12

# Database Pool (PostgreSQL)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_POOL_IDLE=30000
DATABASE_STATEMENT_TIMEOUT=30000

# Redis Configuration
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=500
REDIS_COMMAND_TIMEOUT=5000
REDIS_KEEP_ALIVE=30000

# File Upload
UPLOAD_MAX_FILE_SIZE=104857600
UPLOAD_ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,image/webp

# Cache Configuration
CACHE_TTL_DEFAULT=300
CACHE_TTL_USER=600
CACHE_TTL_MEDIA=1800
CACHE_TTL_SERVICE_STATUS=60

# Worker Configuration
WORKER_CONCURRENCY=2
WORKER_MAX_JOBS_PER_WORKER=10

# Frontend Environment Variables
NEXT_PUBLIC_API_URL=https://media.yourdomain.com/api
NEXT_PUBLIC_BACKEND_URL=https://media.yourdomain.com
NEXT_PUBLIC_WS_URL=wss://media.yourdomain.com
NEXT_PUBLIC_APP_NAME=MediaNest
NEXT_PUBLIC_APP_VERSION=1.0.0
NEXT_PUBLIC_ENABLE_ANALYTICS=false
NEXT_PUBLIC_ENABLE_ERROR_REPORTING=true
NEXT_PUBLIC_ERROR_REPORTING_ENDPOINT=/api/v1/errors
NEXT_PUBLIC_ENABLE_PERFORMANCE_MONITORING=true
NEXT_PUBLIC_IMAGE_OPTIMIZATION=true
NEXT_PUBLIC_IMAGE_DOMAINS=plex.tv,image.tmdb.org
NEXT_PUBLIC_ENABLE_PWA=true

# Build Configuration
NEXT_TELEMETRY_DISABLED=1
NEXT_OPTIMIZE_FONTS=true
NEXT_OPTIMIZE_IMAGES=true
NEXT_OPTIMIZE_CSS=true
NEXT_WEBPACK_CACHE=true

# Docker Configuration
COMPOSE_PROJECT_NAME=medianest
DATA_PATH=/var/lib/medianest
LOG_PATH=/var/log/medianest
BACKUP_PATH=/backups/medianest

# SSL Configuration (for setup script)
CERTBOT_EMAIL=admin@yourdomain.com
SSL_STAGING=false

# Backup Configuration
BACKUP_RETENTION_DAYS=30
BACKUP_NOTIFICATION_URL=

# Optional: External Monitoring
SENTRY_DSN=
NEW_RELIC_LICENSE_KEY=
DATADOG_API_KEY=