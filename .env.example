# MediaNest Configuration Template
# Copy this file to .env and update with your actual values
# 
# For production deployments, use Docker secrets instead of environment variables
# for sensitive values like passwords, API keys, and encryption keys.

# =============================================================================
# APPLICATION ENVIRONMENT
# =============================================================================
NODE_ENV=development
LOG_LEVEL=info

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=4000
HOST=0.0.0.0
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:4000
API_PREFIX=/api
API_VERSION=v1

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=postgresql://medianest:medianest_password@localhost:5432/medianest?connection_limit=20&pool_timeout=30
DATABASE_POOL_SIZE=20
DATABASE_TIMEOUT=30000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Option 1: Use REDIS_URL (full connection string)
# REDIS_URL=redis://localhost:6379

# Option 2: Use individual Redis settings
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_USERNAME=
REDIS_DATABASE=0
REDIS_TLS=false

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# NextAuth.js configuration
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=  # Generate with: openssl rand -hex 32

# JWT configuration
JWT_SECRET=  # Generate with: openssl rand -hex 32 (or use NEXTAUTH_SECRET)
JWT_ISSUER=medianest
JWT_AUDIENCE=medianest-api
JWT_EXPIRES_IN=7d

# Encryption key for sensitive data storage
ENCRYPTION_KEY=  # Generate with: openssl rand -hex 32

# =============================================================================
# PLEX OAUTH CONFIGURATION
# =============================================================================
# Get these from https://www.plex.tv/api/v2/pins or Plex developer dashboard
PLEX_CLIENT_ID=MediaNest
PLEX_CLIENT_SECRET=  # Your Plex client secret
PLEX_CLIENT_IDENTIFIER=  # Optional: defaults to PLEX_CLIENT_ID
PLEX_SERVER_URL=  # Optional: your Plex server URL

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
RATE_LIMIT_API_REQUESTS=100
RATE_LIMIT_API_WINDOW=60
RATE_LIMIT_YOUTUBE_REQUESTS=5
RATE_LIMIT_YOUTUBE_WINDOW=3600
RATE_LIMIT_MEDIA_REQUESTS=20
RATE_LIMIT_MEDIA_WINDOW=3600

# =============================================================================
# YOUTUBE DOWNLOADER CONFIGURATION
# =============================================================================
YOUTUBE_DOWNLOAD_PATH=/app/youtube
YOUTUBE_MAX_CONCURRENT_DOWNLOADS=3
YOUTUBE_RATE_LIMIT=5

# =============================================================================
# ADMIN BOOTSTRAP CONFIGURATION
# =============================================================================
# These credentials are used to create the first admin user
# Change these immediately after first deployment!
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin

# =============================================================================
# FRONTEND CONFIGURATION (NEXT_PUBLIC_ variables)
# =============================================================================
# These variables are exposed to the browser, so don't put secrets here!
NEXT_PUBLIC_API_URL=http://localhost:4000/api
NEXT_PUBLIC_BACKEND_URL=http://localhost:4000
NEXT_PUBLIC_WS_URL=ws://localhost:4000
NEXT_PUBLIC_APP_NAME=MediaNest
NEXT_PUBLIC_APP_VERSION=1.0.0

# Optional: External service URLs for client-side access
# NEXT_PUBLIC_PLEX_URL=http://your-plex-server:32400
# NEXT_PUBLIC_OVERSEERR_URL=http://your-overseerr:5055
# NEXT_PUBLIC_ERROR_REPORTING_ENDPOINT=http://localhost:4000/api/v1/errors/report

# =============================================================================
# EXTERNAL SERVICE ENDPOINTS
# =============================================================================
# These can be configured via the Admin UI after deployment
# Uncomment and set these for direct configuration:

# Overseerr integration
# OVERSEERR_URL=http://your-overseerr:5055
# OVERSEERR_API_KEY=your-api-key

# Uptime Kuma monitoring
# UPTIME_KUMA_URL=http://your-uptime-kuma:3001
# UPTIME_KUMA_TOKEN=your-token

# Plex server (if different from PLEX_SERVER_URL above)
# PLEX_URL=http://your-plex-server:32400

# =============================================================================
# MONITORING & METRICS
# =============================================================================
# METRICS_TOKEN=your-metrics-token
# METRICS_ENDPOINT=http://your-metrics-server/metrics
# ERROR_REPORTING_ENDPOINT=http://localhost:4000/api/v1/errors/report
HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# DOCKER SECRETS CONFIGURATION (PRODUCTION)
# =============================================================================
# Enable Docker secrets for production deployments
USE_DOCKER_SECRETS=false
DOCKER_SECRETS_PATH=/run/secrets

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================
# Additional variables for development environment
# Uncomment these for local development if needed:

# Development database
# DATABASE_URL=postgresql://medianest:medianest_password@localhost:5432/medianest_dev

# Development Redis
# REDIS_URL=redis://localhost:6379/1